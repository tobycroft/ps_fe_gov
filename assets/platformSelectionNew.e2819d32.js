import{g as A}from"./ak.7f196e16.js";import{u as $}from"./user.6a0f1442.js";import{u as g}from"./school.49559a87.js";import{q as D,c as k,r as a,s as L,l as y,_ as w,d as m,e as h,f as v,g as o,h as d,t as I,w as b,j as C,F as E,v as V,x as B,y as N,z as x,A as j,B as H}from"./index.4de482d6.js";import{s as q}from"./study.bdce7221.js";import{u as R}from"./family.e1c52dc6.js";import{u as z}from"./study.1791aadb.js";const P=D({name:"CustomNavHeader",setup(){const e=k(),c=g(),u=$(),l=a(),i=a(),r=a(""),s=a(""),t=a(""),_=()=>{console.log("login() :>> ",y()),y().getLoginInfo("",-1,""),e.push({path:"/login"})};return L(()=>{l.value=c.schoolDomainInfo,i.value=u.getSchoolUserInfo,l.value.icon&&(r.value=l.value.icon),l.value.name&&(s.value=l.value.name),i.value.wx_img&&(t.value=i.value.wx_img)}),{projectImgRef:r,projectNameRef:s,userAvatarRef:t,schoolUserInfoRef:i,exitSystem:_}}});const G={class:"custom-nav-header-container flex"},T={class:"project-info-box flex-start"},J={class:"project-title-style"},K={class:"user-info-box flex-start"},M={class:"user-info-style flex-start"},O={class:"user-name-style"},Q=C("[\u9000\u51FA]");function W(e,c,u,l,i,r){const s=m("el-avatar"),t=m("el-button");return h(),v("div",G,[o("div",T,[d(s,{size:28,src:e.projectImgRef||"/images/school_logo.png"},null,8,["src"]),o("p",J,I(e.projectNameRef),1)]),o("div",K,[o("div",M,[d(s,{size:32,src:e.userAvatarRef},null,8,["src"]),o("p",O,I(e.schoolUserInfoRef.username),1)]),d(t,{class:"exit-btn-style",type:"primary",link:"",onClick:e.exitSystem},{default:b(()=>[Q]),_:1},8,["onClick"])])])}const X=w(P,[["render",W],["__scopeId","data-v-e8bd1d90"]]);function F(){const e=g(),c=e.saveSchoolInfoList,u=e.saveSchoolInfo,l=a(e.getSchoolInfoList),i=a(e.getSchoolInfo),r=$(),s=r.saveSchoolUserInfo,t=a(r.getSchoolUserInfo);return{saveSchoolInfoList:c,saveSchoolInfo:u,saveSchoolUserInfo:s,schoolInfoListRef:l,schoolInfoRef:i,schoolUserInfoRef:t}}function Y(){g().getSchoolGradeList(),g().getSchoolClassList(),R().reqFamilyRoleListApi(),R().reqFamilyTypeListApi(),z().tagInfoListAPI()}const Z=D({name:"platformSelection",components:{CustomNavHeader:X},setup(){F().saveSchoolInfoList(),F().saveSchoolUserInfo,Y();const e=k(),c=a([{id:3,name:"\u6570\u636E\u4E2D\u5FC3",imgURL:"datacenter_bg.png"},{id:2,name:"\u6570\u636E\u5927\u5C4F",imgURL:"big_data_screen.png"}]),u=a(-1),l=f=>{u.value=f,i(u.value)},i=async f=>{const n=y().loginInfo,p=g().getSchoolInfo,U=await _(p.id);switch(f){case 1:e.push("/workbenchView");break;case 2:if(U===null){console.log("\u6CA1\u6709\u5927\u5C4F\u6743\u9650 :>> "),r.value=!0;return}window.location.href=`http://school.familyeducation.org.cn/screen/?uid=${n.uid}&token=${n.token}&school_id=${p.id}&hostname=${encodeURI(p.name)}`;break;case 3:e.push("/datacenter");break}},r=a(!1),s=a(!1),t=()=>{s.value=!0},_=async f=>{const p=await q({school_id:f});return console.log("\u6821\u9A8C\u662F\u5426\u62E5\u6709\u5927\u5C4F\u7AEF\u6743\u9650_res :>> ",p),p};return{listDataRef:c,getImageUrl:A,activeRef:u,changeActive:l,tipsVisibleRef:r,dialogVisibleRef:s,onContactCustomerService:t}}}),ee="/icons/files_icon.png";const S=e=>(j("data-v-cb51bafa"),e=e(),H(),e),oe={class:"platform-selection-container"},se=S(()=>o("p",{class:"title-style"},"\u9009\u62E9\u767B\u5F55\u754C\u9762",-1)),te={class:"ul-style flex"},ne=["onClick"],ae={class:"platform-name-style"},ce=S(()=>o("img",{class:"file-icon",src:ee,alt:""},null,-1)),le={class:"tips-box flex align-center"},ie={class:"flex-start"},re=S(()=>o("p",{class:"tips-content-style"},"\u8FD8\u672A\u8D2D\u4E70\u6B64\u9879\u529F\u80FD\uFF0C",-1)),ue=C("\u8054\u7CFB\u5BA2\u670D\u8D2D\u4E70"),de=S(()=>o("div",{class:"contact-customer-service-dialog-content-style"},[o("p",{class:"contact-customer-service-dialog-title-style"}," \u8FD8\u672A\u8D2D\u4E70\u6B64\u9879\u529F\u80FD "),o("p",{class:"contact-customer-service-dialog-describe-style"}," \u5FAE\u4FE1\u626B\u7801\u8054\u7CFB\u8D2D\u4E70 "),o("div",{class:"qrcode-box"})],-1));function fe(e,c,u,l,i,r){const s=m("CustomNavHeader"),t=m("el-image"),_=m("el-button"),f=m("el-dialog");return h(),v("div",oe,[o("header",null,[d(s)]),o("article",null,[se,o("ul",te,[(h(!0),v(E,null,V(e.listDataRef,n=>(h(),v("li",{key:n.id,class:x(["li-style",{"active-style":e.activeRef===n.id}]),onClick:p=>e.changeActive(n.id)},[d(t,{class:"platform-icon-style",src:e.getImageUrl(n.imgURL),fit:"fill"},null,8,["src"]),o("div",ae,[ce,C(" "+I(n.name),1)])],10,ne))),128))])]),B(o("div",le,[o("div",ie,[d(t,{class:"tips-icon-style",src:e.getImageUrl("close_orange_round.png")},null,8,["src"]),re,d(_,{type:"primary",link:"",onClick:e.onContactCustomerService},{default:b(()=>[ue]),_:1},8,["onClick"])]),d(t,{class:"tips-close-icon-style",src:e.getImageUrl("close_orange.png"),onClick:c[0]||(c[0]=n=>e.tipsVisibleRef=!1)},null,8,["src"])],512),[[N,e.tipsVisibleRef]]),d(f,{class:"contact-customer-service-dialog-style",modelValue:e.dialogVisibleRef,"onUpdate:modelValue":c[1]||(c[1]=n=>e.dialogVisibleRef=n),title:"",width:"30%",draggable:""},{default:b(()=>[de]),_:1},8,["modelValue"])])}const ye=w(Z,[["render",fe],["__scopeId","data-v-cb51bafa"]]);export{ye as default};
