import{c as N}from"./datacenter.afea004c.js";import{u as I}from"./family.e1c52dc6.js";import{u as k}from"./school.49559a87.js";import{h as g}from"./moment.9709ab41.js";import{u as V}from"./area.ea944049.js";import{_ as A,r as u,b as B,d as T,e as c,f as i,g as s,F as p,v,t as o,h as z,z as E,i as M}from"./index.4de482d6.js";const Y=m=>{const h=k().gradeList,d=new Date().getFullYear();let l=2020;g().isBefore(g(`${d}-09-01`))?l=d-Number(m):l=d-Number(m)+1;let r={};for(const _ of h)_.id===l&&(r=_);return r},q="/icons/avatar_icon.png";const H={class:"feedback-container"},P={class:"tab-box"},$=["onClick"],G={class:"comments-wrap"},j={class:"comments-box"},J=["src"],K={key:1,class:"avatar",src:q,alt:""},O={class:"comment-right"},Q={class:"name-date-sec"},U={class:"name-sec"},W={class:"name-char"},X={class:"yellow-tag"},Z={class:"yellow-tag"},ee={class:"date-char"},se={class:"comment-content"},te={class:"img-wrap"},ae=["src"],oe={class:"study-box"},ne={class:"c-char"},ce={class:"blue-char"},ie={class:"flex-start",style:{margin:"18px 0 18px 18px"}},le={class:"flex"},re={class:"record-char"},de={__name:"commentsFeedback",setup(m){const h=t=>g(t).format("MM.DD HH:mm"),d=[{id:"daily",name:"\u6BCF\u65E5\u4E00\u5B66"},{id:"weekly",name:"\u6BCF\u5468\u4E00\u505A"},{id:"monthy",name:"\u6BCF\u6708\u4E00\u8BFE"}],l=u("daily"),r=u(0),_=u([]),f=async()=>{const t={area_id:V().areaInfo.area_id||0,study_type:l.value,limit:10,page:y.value},a=await N(t);_.value=a.data,r.value=a.total},x=t=>{const a=k().schoolInfoList;let n="";return a.forEach(e=>{e.id==t&&(n=e.name)}),n},w=t=>{const a=[];for(const n in t)n.includes("img")&&t[n]!="null"&&a.push(t[n])};B(()=>{f()});const R=t=>{l.value=t,f()},y=u(1),L=t=>{y.value=t,f()},F=t=>{for(const a of d)if(a.id==t)return a.name},S=t=>{const a=I().familyRoleList;let n="";return a.forEach(e=>{e.id==t&&(n=e.name)}),n};return(t,a)=>{const n=T("el-pagination");return c(),i("div",H,[s("div",P,[(c(),i(p,null,v(d,e=>s("div",{class:E(["tab-item",e.id==l.value?"active":""]),onClick:b=>R(e.id),key:e.id},o(e.name),11,$)),64))]),s("div",G,[s("h3",null,"\u7D2F\u8BA1\u8BC4\u4EF7("+o(r.value)+")",1),s("div",j,[(c(!0),i(p,null,v(_.value,(e,b)=>(c(),i("div",{class:"comments-item",key:b},[e.user_info&&e.user_info.wx_img?(c(),i("img",{key:0,class:"avatar",src:e.user_info.wx_img,alt:""},null,8,J)):(c(),i("img",K)),s("div",O,[s("div",Q,[s("div",U,[s("span",W,o(e.student_info.name)+"\u7684"+o(S(e.family_info.family_role_id)),1),s("div",X,o(x(e.student_info.school_id)),1),s("div",Z,o(M(Y)(e.student_info.year).name)+o(e.student_info.class)+"\u73ED ",1)]),s("span",ee,o(h(e.date)),1)]),s("p",se,o(e.content),1),s("div",te,[(c(!0),i(p,null,v(w(e),(C,D)=>(c(),i("img",{class:"img",key:D,src:C,alt:""},null,8,ae))),128))]),s("div",oe,[s("span",ne,"\u8BC4\u8BBA"+o(F(e.study_info.study_type))+"\uFF1A",1),s("span",ce,"\u300A"+o(e.study_info.title)+"\u300B",1)])])]))),128))]),s("div",ie,[s("div",le,[s("span",re,"\u5171"+o(r.value)+"\u6761\u8BB0\u5F55",1),z(n,{"page-size":10,"pager-count":5,layout:"prev, pager, next",total:r.value,onCurrentChange:L},null,8,["total"])])])])])}}},ve=A(de,[["__scopeId","data-v-877becad"]]);export{ve as default};
