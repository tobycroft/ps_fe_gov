import{u as $}from"./school.ac741026.js";import{r as V,b as ee,c as se}from"./study.c2fddcb8.js";import{h as m}from"./moment.9709ab41.js";import{_ as v,e as c,f as r,g as s,t as d,F as P,v as x,j as z,z as I,x as b,y as f,G as j,d as g,C as U,h as y,A,B as E,H as te,E as oe,w as M,r as h,b as ne}from"./index.e383fb1c.js";import{r as H}from"./request.7babc9c3.js";const ie={name:"RedTagCode",props:{title:{type:String,default:"\u5B9E\u8DF5\u8981\u70B9"},list:{type:[Array,Object],default:()=>[]}},data(){return{}}},le={style:{display:"flex"},class:"flex-wrap"},ae={class:"point-char"},ce={class:"tag-code"};function re(e,t,o,_,i,n){return c(),r("div",null,[s("div",le,[s("span",ae,d(o.title),1),(c(!0),r(P,null,x(o.list,(l,a)=>(c(),r("div",{key:a,class:"red-tag"},[z(d(l.name)+" ",1),s("div",ce,d(l.class),1)]))),128))])])}const B=v(ie,[["render",re]]),de="/images/home_progress_mask.png",_e="/images/detail_progress_mask.png",ue="/icons/play_icon.svg",pe="/icons/suspend_icon.svg",me="/icons/play_icon_bright.svg",ye="/icons/suspend_icon_bright.svg";const he={props:{theme:{type:String,default:"dark"},src:{type:String,default:"",required:!0},totalTime:{type:Number,default:0,required:!0},playTimeDefault:{type:Number,default:0}},computed:{handlePlayTime(){const e=this.secondToTime(this.playTime);return`${e.m}:${e.s}`},handleTotalTime(){const e=this.secondToTime(this.totalTime);return`${e.m}:${e.s}`},handlePercent(){return this.percentage(this.playTime,this.totalTime)}},data(){return{timer:null,statePlay:!1,playTime:0,audioContext:void 0}},mounted(){console.log("playTimeDefault :>> ",this.playTimeDefault)},methods:{secondToTime(e,t="true"){const o=parseInt(e);let _=0,i=0,n=0;return t?(_=Math.floor(o/3600)<10?"0"+Math.floor(o/3600):Math.floor(o/3600),i=Math.floor(o/60%60)<10?"0"+Math.floor(o/60%60):Math.floor(o/60%60),n=Math.floor(o%60)<10?"0"+Math.floor(o%60):Math.floor(o%60)):(_=Math.floor(o/3600),i=Math.floor(o/60%60),n=Math.floor(o%60)),{h:_,m:i,s:n}},percentage(e,t){return Math.round(parseInt(e)/parseInt(t)*1e4)/100},handleHoleShow(e){const t=e/4;return e===0?!1:Math.floor(t)===t},player(){console.log("\u51C6\u5907\u6267\u884C\u64AD\u653E",this.audioContext)},suspend(){console.log("\u51C6\u5907\u6267\u884C\u6682\u505C :>>"),this.audioContext&&this.audioContext.pause()},playeInteractiveAnimation(){console.log("\u89E6\u53D1\u4E86\u5F00\u59CB\u64AD\u653E\u4EA4\u4E92\u52A8\u753B :>> "),this.statePlay=!0,this.timer=setInterval(()=>{if(this.playTime===this.totalTime){this.percent=0,this.playTime=0,this.suspend();return}this.playTime+=1,this.percent+=1},1e3)},suspendInteractiveAnimation(){console.log("\u89E6\u53D1\u4E86\u6682\u505C\u64AD\u653E\u4EA4\u4E92\u52A8\u753B :>> "),this.statePlay=!1,clearInterval(this.timer)},initAudio(){this.playTime=this.playTimeDefault,this.audioContext=new AudioContext,this.audioContext.src=this.src,this.audioContext.autoplay=!1,this.audioContext.startTime=this.playTime,this.audioContext.onPlay(()=>{console.log("\u76D1\u542C\u5230\u97F3\u9891\u64AD\u653E\u4E8B\u4EF6 :>> "),this.playeInteractiveAnimation()}),this.audioContext.onError(e=>{console.log("\u76D1\u542C\u97F3\u9891\u64AD\u653E\u5F02\u5E38 :>> ",e)}),this.audioContext.onPause(()=>{console.log("\u76D1\u542C\u5230\u6682\u505C\u4E8B\u4EF6 :>> ",this.playTime),this.$emit("pause",this.playTime),this.suspendInteractiveAnimation()}),this.audioContext.onEnded(()=>{console.log("\u76D1\u542C\u5230\u64AD\u653E\u5B8C\u6BD5\u4E8B\u4EF6 :>> "),this.percent=0,this.playTime=0,this.suspendInteractiveAnimation(),this.$emit("ended")}),this.audioContext.onError(e=>{console.log(e.errMsg),console.log(e.errCode)})}}},be={class:"audio-container"},fe={class:"task-article flex"},ge={class:"process-box"},ve=["percent"],Ie={class:"mask-box-style"},ke={key:0,class:"audio-progress-mask-style",src:de},Pe={key:1,class:"audio-progress-mask-style",src:_e},xe={class:"mask-list custom-flex-start"},Te={class:"audio-btn-box"};function Ce(e,t,o,_,i,n){return c(),r("div",be,[s("div",fe,[s("div",ge,[s("progress",{percent:n.handlePercent,"stroke-width":"48",activeColor:"#DA4036",backgroundColor:"#CCCCCC"},null,8,ve),s("div",Ie,[o.theme==="dark"?(c(),r("img",ke)):(c(),r("img",Pe)),s("div",xe,[(c(),r(P,null,x(20,(l,a)=>s("div",{key:a,class:I(["mask-item",{"min-hole-dark":o.theme==="dark"&&!n.handleHoleShow(a),"max-hole-dark":o.theme==="dark"&&n.handleHoleShow(a),"min-hole-bright":o.theme==="bright"&&!n.handleHoleShow(a),"max-hole-bright":o.theme==="bright"&&n.handleHoleShow(a)}])},null,2)),64))])])]),s("div",Te,[b(s("img",{class:"play-icon",src:ue,onClick:t[0]||(t[0]=j((...l)=>n.player&&n.player(...l),["stop"]))},null,512),[[f,!i.statePlay&&o.theme==="dark"]]),b(s("img",{class:"play-icon",src:pe,onClick:t[1]||(t[1]=j((...l)=>n.suspend&&n.suspend(...l),["stop"]))},null,512),[[f,i.statePlay&&o.theme==="dark"]]),b(s("img",{class:"play-icon",src:me,onClick:t[2]||(t[2]=j((...l)=>n.player&&n.player(...l),["stop"]))},null,512),[[f,!i.statePlay&&o.theme==="bright"]]),b(s("img",{class:"play-icon",src:ye,onClick:t[3]||(t[3]=j((...l)=>n.suspend&&n.suspend(...l),["stop"]))},null,512),[[f,i.statePlay&&o.theme==="bright"]])])]),s("div",{class:I(["time-box-dark flex",{"time-box-dark":o.theme==="dark","time-box-bright":o.theme==="bright"}])},[s("div",null,d(n.handlePlayTime),1),s("div",null,d(n.handleTotalTime),1)],2)])}const Ue=v(he,[["render",Ce],["__scopeId","data-v-d735aec3"]]),Y="/assets/week_theme_tag.f561fa7d.svg",Ae="/icons/quotes_start_icon.svg",Ee="/icons/quotes_end_icon.svg";const we={components:{RedTagCode:B,AudioModMod:Ue},computed:{handleTagVisible(){return this.taskDay&&this.taskDay.common_tag&&this.taskDay.common_tag.length>0},handleGradeFormat(){return this.taskDay.grade?this.taskDay.grade+"\u5E74\u7EA7":"\u672A\u77E5\u5E74\u7EA7"}},data(){return{isCollection:!1,taskId:null,studentId:null,taskDay:{},playTime:0,evaluationPage:{page:1,limit:10},evaluationTotal:0,last_page:0,evaluationList:[],rateInfo:{},allowsEvaluationOf:!1}},props:["lookStudyId"],watch:{lookStudyId:{handler(e){console.log("study_id",e),this.studyDailyGetAPI(e)},immediate:!0}},methods:{onShare(e){console.log("e :>> ",e)},onClickCollection(){this.isCollection=!this.isCollection,this.rateInfoAddAPI(this.taskId,this.studentId,this.rateInfo.share,this.isCollection)},onComments(){this.allowsEvaluationOf&&this.$refs.publishComments.open()},onPause(e){console.log("TaskDay\u6682\u505C :>> ",e),this.studyPlaySetAPI(this.taskId,e.detail.__args__[0])},onEnded(){console.log("TaskDay\u64AD\u653E\u5B8C\u6BD5 :>> ")},onSubmitComments(e){console.log("\u63D0\u4EA4\u8BC4\u8BBA :>> ",e),this.rateThreadAddAPI(this.taskId,this.studentId,e)},async studyDailyGetAPI(e){const o=await V({study_id:e,type:"daily"});this.taskDay=o}}},G=e=>(A("data-v-59b9d853"),e=e(),E(),e),Se={class:"everyday-detail-container"},Le={class:"task-info-title"},je={class:"mark-box-style flex"},Me={key:0,class:"task-type-img-style",src:Y,mode:""},Re={key:1,class:"tag-name-style"},De={class:"grade-style"},Oe={class:"title-box-style"},Ne={class:"title-style"},$e={class:"tag-box-style"},Ve={class:"remarks-box-style"},He=G(()=>s("div",null,[s("img",{src:Ae,class:"quote-style",alt:"\u5F15\u53F7"})],-1)),Ge={class:"remarks-style"},Fe=G(()=>s("div",{class:"remarks-quotes-end-box-style"},[s("img",{src:Ee,class:"quote-style",alt:"\u5F15\u53F7"})],-1)),qe={class:"audio-style-box"},We=G(()=>s("div",{class:"audio-title-style"},"\u8BED\u97F3\u64AD\u62A5",-1)),Xe=["innerHTML"];function ze(e,t,o,_,i,n){const l=g("RedTagCode"),a=g("AudioModMod");return c(),r("div",Se,[s("div",Le,[s("div",je,[s("div",{class:I(["flex-start",{"task-type-style":n.handleTagVisible}])},[n.handleTagVisible?(c(),r("img",Me)):U("",!0),n.handleTagVisible?(c(),r("div",Re,d(i.taskDay.common_tag[0].name),1)):U("",!0)],2),s("div",De,"\u6240\u5C5E\u5E74\u7EA7\xB7"+d(n.handleGradeFormat),1)]),s("div",Oe,[s("div",Ne,d(i.taskDay.title),1),s("div",$e,[y(l,{title:"\u5173\u6CE8\u8981\u70B9",list:i.taskDay.special_tag},null,8,["list"])])]),s("div",Ve,[He,s("div",Ge,d(i.taskDay.slogan),1),Fe]),s("div",qe,[We,s("div",null,[y(a,{theme:"bright",src:i.taskDay.attach_url,ref:"audio",totalTime:i.taskDay.attach_duration,playTimeDefault:i.playTime,onPause:n.onPause,onEnded:n.onEnded},null,8,["src","totalTime","playTimeDefault","onPause","onEnded"])])]),s("div",{class:"content-box-style",innerHTML:i.taskDay.content},null,8,Xe)])])}const Be=v(we,[["render",ze],["__scopeId","data-v-59b9d853"]]);const Ye={components:{RedTagCode:B},data(){return{weekTaskObj:{area_id:0,attach_type:"none",attach_url:"",can_push:1,change_date:"2022-07-05T09:34:44Z",common_tag:[{class:"G01Test",id:1,name:"\u5BB6\u5EAD\u5171\u5B66",study_id:1,study_type:"daily",tag_type:"common"},{class:"G01Test",id:2,name:"\u5165\u5B66\u9002\u5E94",study_id:1,study_type:"daily",tag_type:"special"},{class:"G01Test",id:3,name:"\u4E60\u60EF\u57F9\u517B",study_id:1,study_type:"daily",tag_type:"common"},{class:"G01Test",id:1,name:"\u5BB6\u5EAD\u5171\u5B66",study_id:1,study_type:"daily",tag_type:"common"},{class:"G01Test",id:2,name:"\u5165\u5B66\u9002\u5E94",study_id:1,study_type:"daily",tag_type:"special"},{class:"G01Test",id:3,name:"\u4E60\u60EF\u57F9\u517B",study_id:1,study_type:"daily",tag_type:"common"}],complete:1,content:"\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9",date:"2022-07-04T14:36:01Z",grade:"1",howto:"\u600E\u4E48\u5B9E\u73B0\u5BCC\u6587\u672C\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9",id:1,img:"\u56FE\u7247",img_intro:"\u5C0F\u6807\u56FE\u7247",is_complete:!0,notify:"\u5B9E\u8DF5\u63D0\u793A\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9",push_date:"2022-03-08T18:09:02Z",school_id:0,school_info:{area_id:1,detail:"\u5750\u843D\u4E8E",icon:"",id:1,img:"",name:"\u798F\u5DDE\u6D4B\u8BD5\u5B66\u6821",sight:255},show_date:"2022-07-04T14:36:01Z",slogan:"\u63A8\u8350\u91D1\u53E5",special_tag:[{class:"G01Test",id:1,name:"\u5BB6\u5EAD\u5171\u5B66",study_id:1,study_type:"daily",tag_type:"common"},{class:"G01Test",id:2,name:"\u5165\u5B66\u9002\u5E94",study_id:1,study_type:"daily",tag_type:"special"},{class:"G01Test",id:3,name:"\u4E60\u60EF\u57F9\u517B",study_id:1,study_type:"daily",tag_type:"common"},{class:"G01Test",id:1,name:"\u5BB6\u5EAD\u5171\u5B66",study_id:1,study_type:"daily",tag_type:"common"},{class:"G01Test",id:2,name:"\u5165\u5B66\u9002\u5E94",study_id:1,study_type:"daily",tag_type:"special"},{class:"G01Test",id:3,name:"\u4E60\u60EF\u57F9\u517B",study_id:1,study_type:"daily",tag_type:"common"}],teacher_id:0,tick_area:1e3,tick_location:"\u67D0\u5730\u70B9",tick_mode:"weekly",tick_need:1,tick_word:"\u6BCF\u5468\u53C2\u4E0E\u6253\u5361",tick_x:0,tick_y:0,title:"\u6807\u9898"},completeCount:0,study_id:0,recordList:[],student_id:33,limit:10,page:1}},props:["lookStudyId"],created(){},watch:{lookStudyId:{handler(e){console.log("study_id",e),this.reqWeekTaskGetApi(e)},immediate:!0}},methods:{async reqWeekTaskGetApi(e){const o=await V({type:"weekly",study_id:e});this.weekTaskObj=o},handleSemester(e){const t=m(e).year();return m(e).isAfter(`${t}-02-01`)&&m(e).isBefore(`${t}-09-01`)?"\u7B2C\u4E8C\u5B66\u671F":"\u7B2C\u4E00\u5B66\u671F"},handleWeek(e){const t=m(e).year();let o="";return m(e).isAfter(`${t}-07-01`)&&m(e).isBefore(`${t}-09-01`)?"\u6691\u5047":(m(e).isAfter(`${t}-02-01`)&&m(e).isBefore(`${t}-09-01`)&&(o=m.duration(m(e)-m(`${t}-02-01`)).asWeeks()),m(e).isBefore(`${t}-02-01`)&&(o=m.duration(m(e)-m(`${t-1}-09-01`)).asWeeks()),m(e).isAfter(`${t}-09-01`)&&(o=m.duration(m(e)-m(`${t}-08-29`)).asWeeks()),console.log(parseInt(o+1)),"\u7B2C"+parseInt(o+1)+"\u5468")}}},Ke={class:"root"},Ze={class:"container pad-df"},Qe={class:"theme-title-card"},Je={class:"flex"},es={key:0,class:"theme-tag"},ss=s("img",{src:Y,style:{width:"14px",height:"14px"},alt:"\u56FE\u6807"},null,-1),ts={class:"theme-tag-char"},os={key:1},ns={class:"grade-char"},is={class:"title-theme"},ls=["innerHTML"],as={class:"week-char"},cs={class:"content-wrap"},rs=s("div",{class:"content-title"},[s("div",{class:"block-red"}),s("span",{class:"content-title-char"},"\u5B9E\u8DF5\u65B9\u6CD5")],-1),ds=["innerHTML"],_s={class:"special-box"},us=s("div",{class:"special-title"},"\u7279\u522B\u63D0\u9192\uFF1A",-1),ps=["innerHTML"];function ms(e,t,o,_,i,n){const l=g("RedTagCode");return c(),r("div",Ke,[s("div",Ze,[s("div",Qe,[s("div",Je,[i.weekTaskObj.common_tag[0].name?(c(),r("div",es,[ss,s("span",ts,d(i.weekTaskObj.common_tag[0].name),1)])):(c(),r("span",os)),s("span",ns,"\u6240\u5C5E\u5E74\u7EA7\xB7"+d(i.weekTaskObj.grade?i.weekTaskObj.grade+"\u5E74\u7EA7":"\u4E0D\u9650"),1)]),s("div",is,d(i.weekTaskObj.title),1),y(l,{title:"\u5B9E\u8DF5\u8981\u70B9",list:i.weekTaskObj.special_tag},null,8,["list"]),s("div",{innerHTML:i.weekTaskObj.content},null,8,ls),s("div",as,d(n.handleSemester(i.weekTaskObj.show_date))+"-"+d(n.handleWeek(i.weekTaskObj.show_date)),1)]),s("div",cs,[rs,s("div",{innerHTML:i.weekTaskObj.howto},null,8,ds),s("div",_s,[us,s("div",{innerHTML:i.weekTaskObj.notify},null,8,ps)])])])])}const ys=v(Ye,[["render",ms]]);const hs={props:{width:{type:Number,default:300},height:{type:Number,default:200},chapterId:{type:String,default:""},src:{type:String,defualt:""},initialTime:{type:[Number,String],default:0}},data(){return{videoUrl:"",playTime:0,videoContext:void 0,playStatus:!1}},watch:{chapterId(){this.switchVideoSource()}},mounted(){this.switchVideoSource()},methods:{onPause(){this.pause(),this.playStatus=!1},onPlay(){this.playStatus=!0},onClickNotes(){this.$emit("notes")},videoErrorCallback(e){console.log("\u64AD\u653E\u5F02\u5E38 :>> ",e)},switchVideoSource(){this.videoUrl="#",console.log("this.src :>> ",this.src),setTimeout(()=>{this.videoUrl=this.src},10)},listenPlay(){this.playStatus=!0},timeupdate(e){console.log("event.detail :>> ",e)},pause(){console.log("pause :>> "),this.playStatus&&this.$emit("pause",this.playTime),this.playStatus=!1},ended(){this.playStatus=!1}}},bs={class:"video-container"},fs=["src","initial-time"];function gs(e,t,o,_,i,n){return c(),r("div",bs,[s("video",{id:"myVideo",style:{width:"100%",height:"100%"},src:i.videoUrl,"initial-time":o.initialTime,"object-fit":"contain",onPlay:t[0]||(t[0]=(...l)=>n.listenPlay&&n.listenPlay(...l)),onTimeupdate:t[1]||(t[1]=(...l)=>n.timeupdate&&n.timeupdate(...l)),onPause:t[2]||(t[2]=(...l)=>n.pause&&n.pause(...l)),onEnded:t[3]||(t[3]=(...l)=>n.ended&&n.ended(...l)),onError:t[4]||(t[4]=(...l)=>n.videoErrorCallback&&n.videoErrorCallback(...l)),controls:""},null,40,fs)])}const vs=v(hs,[["render",gs],["__scopeId","data-v-d0de259d"]]);const Is={props:{list:{type:[Array,Object],default:()=>[]},active:{type:[String,Number],default:1}},created(){console.log("this.list :>> ",this.list)},methods:{onTab(e){this.$emit("change",e.value)}}},ks=e=>(A("data-v-4c2181d9"),e=e(),E(),e),Ps={class:"tabs-container"},xs={class:"tabs-header-box"},Ts={class:"tabs-header-ul-style flex align-start"},Cs=["onClick"],Us=ks(()=>s("div",{class:"active-border-style"},null,-1));function As(e,t,o,_,i,n){return c(),r("div",Ps,[s("div",xs,[s("div",Ts,[(c(!0),r(P,null,x(o.list,l=>(c(),r("div",{key:l.value,class:I(["tabs-header-li-style",{"tabs-header-li-active-style":o.active===l.value}]),onClick:a=>n.onTab(l)},[z(d(l.name)+" ",1),Us],10,Cs))),128))]),s("div",null,[te(e.$slots,"default",{},void 0,!0)])])])}const Es=v(Is,[["render",As],["__scopeId","data-v-4c2181d9"]]);const ws={name:"IntroductionInfo",props:{studentId:{type:String,default:""},taskId:{type:String,default:""},activeMonth:{type:Object,default:()=>{}}},data(){return{taskMonthData:{},rateInfo:{},isCollection:!1,hashFold:!0}},watch:{taskId:{handler(e){this.studyInfoGetAPI(e,"monthy")},immediate:!0}},mounted(){console.log("taskMonthData :>> ",this.taskMonthData),this.studyInfoGetAPI(this.taskId,"monthy")},methods:{onClickCollection(){this.isCollection=!this.isCollection,this.rateInfoAddAPI(this.taskId,this.studentId,this.rateInfo.share,this.isCollection)},onShare(e){console.log("e :>> ",e),this.rateInfoAddAPI(this.taskId,this.studentId,!0,this.rateInfo.like)},onUnfold(){this.hashFold=!this.hashFold},async studyInfoGetAPI(e,t){const _=await V({study_id:e,type:t});console.log("\u6708\u5217\u8868API_res :>> ",_),this.taskMonthData=_}}},Ss=e=>(A("data-v-d95699c6"),e=e(),E(),e),Ls={class:"introduction-info-container"},js={class:"introduction-info-header-style flex"},Ms={class:"introduction-info-title-style"},Rs=Ss(()=>s("div",{class:"introduction-btn-box-style flex-start"},null,-1)),Ds={class:"introduction-info-article-style"},Os={class:"lecturer-info-box-style flex-start"},Ns={class:"lecturer-name-style"},$s={class:"tags-style"},Vs={class:"more-wrapper"},Hs=["innerHTML"];function Gs(e,t,o,_,i,n){return c(),r("div",null,[b(s("div",Ls,[s("div",js,[s("div",Ms,d(i.taskMonthData.title),1),Rs]),s("div",Ds,[s("div",Os,[s("div",Ns," \u8BB2\u5E08\uFF1A"+d(i.taskMonthData.teacher_info?i.taskMonthData.teacher_info.name:""),1),s("div",$s,d(i.taskMonthData.teacher_info?i.taskMonthData.teacher_info.info:""),1)]),s("div",Vs,[s("div",{class:I(["task-introduce-style",{"fold-style":i.hashFold}])},[s("div",{class:"detail-btn-style",onClick:t[0]||(t[0]=(...l)=>n.onUnfold&&n.onUnfold(...l))},d(i.hashFold?"\u5C55\u5F00":"\u6298\u53E0"),1),s("div",{innerHTML:i.taskMonthData.content},null,8,Hs)],2)])])],512),[[f,i.taskMonthData.title]])])}const Fs=v(ws,[["render",Gs],["__scopeId","data-v-d95699c6"]]),qs="/images/now_play.png";const Ws={components:{},props:{active:{type:[String,Number],default:null},taskId:{type:String,default:""}},data(){return{topicList:[]}},watch:{taskId:{handler(e){console.log("month_id directiory",e),this.studyTopicListAPI(e)},immediate:!0}},mounted(){},methods:{onChange(e,t){this.$emit("change",{row:e,index:t})},secondToTime(e,t="true"){const o=parseInt(e);let _=0,i=0,n=0;return t?(_=Math.floor(o/3600)<10?"0"+Math.floor(o/3600):Math.floor(o/3600),i=Math.floor(o/60%60)<10?"0"+Math.floor(o/60%60):Math.floor(o/60%60),n=Math.floor(o%60)<10?"0"+Math.floor(o%60):Math.floor(o%60)):(_=Math.floor(o/3600),i=Math.floor(o/60%60),n=Math.floor(o%60)),{h:_,m:i,s:n}},handlePlayTime(e){console.log("playTime :>> ",e);const t=this.secondToTime(e,!1);return console.log("time :>> ",t),t.m>0?`${t.m}\u5206\u949F`:`${t.s}\u79D2\u949F`},next(){console.log("\u6267\u884Cnext :>> ");let e=parseInt(this.active);e<this.topicList.length-1&&(e+=1,this.onChange(this.topicList[e],e))},async studyTopicListAPI(e){const o=await ee({monthy_id:e,type:"monthy"});this.topicList=o,this.onChange(this.topicList[0],0)}}},Xs=e=>(A("data-v-059c0a51"),e=e(),E(),e),zs={class:"directory-container"},Bs={class:"header-box-style border-bottom-style flex"},Ys=Xs(()=>s("div",{class:"header-title-style"},"\u76EE\u5F55",-1)),Ks={class:"header-total-style"},Zs={class:"ul-style"},Qs=["onClick"],Js={class:"flex"},et={class:"li-content-length-style"},st={class:"now-play-image-style",src:qs,mode:""};function tt(e,t,o,_,i,n){return c(),r("div",zs,[s("div",null,[s("div",Bs,[Ys,s("div",Ks,"\u5171"+d(i.topicList.length)+"\u8282",1)]),s("div",Zs,[(c(!0),r(P,null,x(i.topicList,(l,a)=>(c(),r("div",{key:a,class:I(["li-style",{"border-bottom-style":a!=5-1}])},[s("div",{class:I(["li-content-style",{"li-content-last-style":a===5-1}]),onClick:T=>n.onChange(l,a)},[s("div",{class:I(["li-content-title-style",{"li-content-title-active-style":o.active===a}])},d(a+1)+". "+d(l.title),3),s("div",Js,[s("div",et,d(n.handlePlayTime(l.attach_duration)),1),b(s("img",st,null,512),[[f,o.active===a]])])],10,Qs)],2))),128))])])])}const ot=v(Ws,[["render",tt],["__scopeId","data-v-059c0a51"]]),nt=async e=>await H.post("https://api.ps.familyeducation.org.cn/v1/quiz/question/list",e),it=async e=>await H.post("https://api.ps.familyeducation.org.cn/v1/quiz/question/add",e),lt=async e=>await H.post("https://api.ps.familyeducation.org.cn/v1/quiz/question/get",e);const at={components:{},props:{taskId:{type:Number,default:0}},data(){return{list:[],answerActive:[],result:void 0}},computed:{correctAnswerCmp(){let e="";if(this.result)for(const t of this.result.answerArr)console.log("item :>> ",t),e+=t.title.substring(0,1)+" ";return console.log("str :>> ",e),e},showTipsSuccess(){return this.result?this.result.answerResults==="success":!1},showTipsError(){return this.result?this.result.answerResults==="error":!1},answerState(){return this.result?this.result.answerResults==="error"||this.result.answerResults==="success":!1}},watch:{taskId:{handler(e){this.getListWorkflow()},immediate:!0}},methods:{async getListWorkflow(){this.list=await this.quizQuestionListAPI(this.taskId)},handleAnswerEcho(e){const t=[];e.choices.forEach(o=>{t.push(parseInt(o))}),this.list.selection_info.forEach(o=>{t.forEach(_=>{o.id===_&&(o.checked=!0)})}),this.handleAnswerActive(),this.onSubmit(!1)},changeChecked(e){console.log("\u4FEE\u6539\u9009\u9879 :>> ",e),!this.answerState&&(e.checked=!e.checked,this.handleAnswerActive())},handleAnswerActive(){console.log("this.list :>> ",this.list),this.answerActive=[];for(const e of this.list.selection_info)e.checked&&this.answerActive.push(e.id);console.log("answerActive :>> ",this.answerActive)},handleTips(e){console.log("answer :>> ",e);const t={},o=[],_=[];let i=null;for(const n of this.list.selection_info)n.is_answer===1&&o.push(n);t.answerArr=o;for(const n of o){const l=e.filter(a=>a===n.id);for(const a of l)_.push(a)}return t.activeArr=_,i=o.length===_.length?"success":"error",t.answerResults=i,t},async onSubmit(e=!0){if(e){await this.quizRecordAddAPI(this.list.id,`[${this.answerActive}]`),oe({title:"\u7B54\u9898\u6210\u529F",type:"success",success:()=>{this.$emit("submit",this.list),this.result=this.handleTips(this.answerActive),console.log("this.result :>> ",this.result)}});return}this.$emit("submit",this.list),this.result=this.handleTips(this.answerActive),console.log("this.result :>> ",this.result)},onRedo(){this.answerActive=[],this.result=void 0,this.list.selection_info.forEach(e=>{e.checked=!1})},async quizQuestionListAPI(e){const o=await nt({study_id:e});console.log("res :>> ",o);for(const _ of o[0].selection_info)_.checked=!1;return o[0]},async quizRecordAddAPI(e,t){return await it({question_id:e,type:"monthy",choice:t})},async quizRecordGetAPI(e){return await lt({question_id:e,type:"monthy"})}}},ct={class:"practice-container"},rt={class:"practice-box"},dt={class:"header-style"},_t={key:0,class:"ul-style"},ut=["onClick"],pt={class:"icon-box"},mt={class:"answer-options-style"},yt={class:"footer-style"},ht={class:"tips-box-style"},bt={class:"success-tips-style"};function ft(e,t,o,_,i,n){const l=g("IconSvg");return c(),r("div",ct,[s("div",null,[s("div",rt,[s("div",dt,d(i.list.title),1),i.list.selection_info?(c(),r("div",_t,[(c(!0),r(P,null,x(i.list.selection_info,(a,T)=>(c(),r("div",{key:T,class:"li-style custom-flex-start",onClick:w=>n.changeChecked(a)},[s("div",pt,[b(y(l,{iconName:"not_to_choose_icon",width:32,height:32},null,512),[[f,!a.checked]]),b(y(l,{iconName:"regsiter_selected",width:32,height:32},null,512),[[f,a.checked]])]),s("div",mt,d(a.title),1)],8,ut))),128))])):U("",!0),s("div",yt,[s("div",ht,[b(s("div",{class:"error-tips-style"}," \u56DE\u7B54\u9519\u8BEF\uFF0C\u6B63\u786E\u7B54\u6848"+d(n.correctAnswerCmp),513),[[f,n.showTipsError]]),b(s("div",bt," nice~\u56DE\u7B54\u6B63\u786E\uFF01 ",512),[[f,n.showTipsSuccess]])]),n.answerState?U("",!0):(c(),r("div",{key:0,class:"submit-btn-style",onClick:t[0]||(t[0]=(...a)=>n.onSubmit&&n.onSubmit(...a))}," \u63D0\u4EA4 ")),n.answerState?(c(),r("div",{key:1,class:"reset-btn-style",onClick:t[1]||(t[1]=(...a)=>n.onRedo&&n.onRedo(...a))}," \u91CD\u505A ")):U("",!0)])])])])}const gt=v(at,[["render",ft],["__scopeId","data-v-172ed107"]]);const vt={name:"everyMonthDetail",props:["lookStudyId","lookMonthId"],components:{VideoMod:vs,Tabs:Es,IntroductionInfo:Fs,Directory:ot,Practice:gt},watch:{lookStudyId:{handler(e){console.log("study_id",e),this.taskId=e},immediate:!0},lookMonthId:{handler(e){console.log("month_id",e),this.monthyId=e},immediate:!0}},data(){return{hashHistoryRouter:!1,tabsList:[{name:"\u7B80\u4ECB",value:0},{name:"\u7EC3\u4E60",value:1}],practiceList:{problem:"1.\u5B69\u5B50\u521A\u4E0A\u4E00\u5E74\u7EA7\uFF0C\u5BB6\u957F\u8981\u6709\u56DB\u4E2A\u5FC5\u5907\u7684\u5FC3\u6001\uFF0C\u4EE5\u4E0B\u6B63\u786E\u7684\u662F\uFF08\u591A\u9009\uFF09",options:[{name:"A. \u6559\u80B2\u8D23\u4EFB\u8981\u8BA4\u6E05",value:"A",checked:!1},{name:"B. \u7231\u4E0E\u5173\u6000\u8981\u7ED9\u591F",value:"B",checked:!1},{name:"C. \u7FA4\u4F53\u73AF\u5883\u8981\u9002\u5E94",value:"C",checked:!1},{name:"D. \u5BB6\u6821\u6C9F\u901A\u8981\u7D27\u5BC6",value:"D",checked:!1}]},videoW:null,videoH:null,student_id:"",taskId:"",monthyId:"",activeMonth:{},showWriteNote:!1,activeTab:0,activePlayIndex:0,actrivePlay:{},initialTime:0}},methods:{writeNoteSuccess(){this.$refs.notes.noteInfoListAPI(this.taskId)},changeTab(e){console.log("\u5207\u6362Tabs\u9879_val :>> ",e),this.activeTab=e},async onChangeDirectory(e){console.log("\u5207\u6362\u76EE\u5F55\u9009\u4E2D\u9879_val :>> ",e),this.$refs.video.onPause(),this.activePlayIndex=e.index,this.actrivePlay=e.row,this.$refs.video.onPlay()},handleWriteNote(){this.showWriteNote=!0},closeWriteNote(){this.showWriteNote=!1}}},It={class:"every-month-detail-container"},kt={class:"video-box-style"},Pt={class:"operation-box-style"},xt={class:"introduction-box-style"},Tt={class:"directory-style"},Ct={class:"practice-box-style"};function Ut(e,t,o,_,i,n){const l=g("VideoMod"),a=g("IntroductionInfo"),T=g("Directory"),w=g("Practice"),S=g("Tabs");return c(),r("div",It,[s("div",kt,[y(l,{class:"video-style",ref:"video",chapterId:i.actrivePlay.id,src:i.actrivePlay.attach_url,initialTime:i.initialTime,onNotes:n.handleWriteNote,onPause:e.onPause,onEnded:e.onEnded},null,8,["chapterId","src","initialTime","onNotes","onPause","onEnded"])]),s("div",Pt,[b(y(S,{list:i.tabsList,active:i.activeTab,onChange:n.changeTab},{default:M(()=>[b(s("div",xt,[y(a,{studentId:i.student_id,taskId:i.taskId,activeMonth:i.activeMonth},null,8,["studentId","taskId","activeMonth"]),s("div",Tt,[y(T,{ref:"Directory",active:i.activePlayIndex,taskId:i.monthyId,onChange:n.onChangeDirectory},null,8,["active","taskId","onChange"])])],512),[[f,i.activeTab===0]]),b(s("div",Ct,[y(w,{taskId:i.taskId},null,8,["taskId"])],512),[[f,i.activeTab===1]])]),_:1},8,["list","active","onChange"]),[[f,!i.showWriteNote]])])])}const At=v(vt,[["render",Ut],["__scopeId","data-v-3b6b52cf"]]);const K=e=>(A("data-v-6838263e"),e=e(),E(),e),Et={class:"study-overview-container"},wt={class:"sort-wrap"},St={class:"sort-sec"},Lt=K(()=>s("span",{class:"o-char"},"\u5E74\u7EA7\uFF1A",-1)),jt=["onClick"],Mt={class:"sort-sec"},Rt=K(()=>s("span",{class:"o-char"},"\u5206\u7C7B\uFF1A",-1)),Dt=["onClick"],Ot={class:"learn-box"},Nt=["onClick"],$t={class:"left-title"},Vt={class:"title-char"},Ht={class:"yellow-tag"},Gt={class:"time-char"},Ft={class:"flex-start",style:{margin:"18px 0 0 18px"}},qt={class:"flex"},Wt={class:"record-char"},Xt={class:"study-dialog-wrap"},zt={class:"study-dialog-wrap"},Bt={class:"study-dialog-wrap"},Yt={__name:"studyOverview",setup(e){const t=h([]),o=[{id:"daily",name:"\u6BCF\u65E5\u4E00\u5B66"},{id:"weekly",name:"\u6BCF\u5468\u4E00\u505A"},{id:"monthy",name:"\u6BCF\u6708\u4E00\u8BFE"}],_=h("daily"),i=u=>{_.value=u,L()},n=h(1),l=u=>{n.value=u,L()},a=h(0),T=h(1),w=u=>{T.value=u,L()},S=h([]),L=async()=>{const u={type:_.value,is_custom:!1,limit:10,page:T.value,area_id:0,school_id:0,grade:n.value,title:"",start_date:"",end_date:"",tag_ids:""},k=await se(u);S.value=k.data,a.value=k.total};ne(async()=>{const u=$().gradeList;!u||!u.length?(await $().getSchoolGradeList(),t.value=$().gradeList):t.value=u,L()});const Z=u=>m(u).utc().format("YYYY.MM.DD"),F=h(0),R=h(!1),q=h(0),D=h(!1),W=h(0),O=h(!1),X=h(0),Q=u=>{u.study_type=="daily"&&(R.value=!0,F.value=u.id),u.study_type=="weekly"&&(D.value=!0,q.value=u.id),u.study_type=="monthy"&&(O.value=!0,W.value=u.id,X.value=u.study_id)};return(u,k)=>{const J=g("el-pagination"),N=g("el-dialog");return c(),r("div",Et,[s("div",wt,[s("div",St,[Lt,(c(!0),r(P,null,x(t.value,p=>(c(),r("div",{class:I(["lab-item",n.value==p.id?"active":""]),onClick:C=>l(p.id),key:p.id},d(p.name),11,jt))),128))]),s("div",Mt,[Rt,(c(),r(P,null,x(o,p=>s("div",{class:I(["lab-item",_.value==p.id?"active":""]),onClick:C=>i(p.id),key:p.id},d(p.name),11,Dt)),64))])]),s("div",Ot,[(c(!0),r(P,null,x(S.value,p=>(c(),r("div",{class:"learn-sec flex",key:p.id,onClick:C=>Q(p)},[s("div",$t,[s("span",Vt,"\u300A"+d(p.title)+"\u300B",1),(c(!0),r(P,null,x(p.special_tag,C=>(c(),r("div",{class:"blue-tag",key:C.id},d(C.name),1))),128)),s("div",Ht,"\u6240\u5C5E\u5E74\u7EA7\uFF1A"+d(p.grade)+"\u5E74\u7EA7",1)]),s("span",Gt,d(Z(p.show_date)),1)],8,Nt))),128))]),s("div",Ft,[s("div",qt,[s("span",Wt,"\u5171"+d(a.value)+"\u6761\u8BB0\u5F55",1),y(J,{"page-size":10,"pager-count":5,layout:"prev, pager, next",total:a.value,onCurrentChange:w},null,8,["total"])])]),y(N,{modelValue:R.value,"onUpdate:modelValue":k[0]||(k[0]=p=>R.value=p),title:"",width:"29vw",center:""},{default:M(()=>[s("div",Xt,[y(Be,{"look-study-id":F.value},null,8,["look-study-id"])])]),_:1},8,["modelValue"]),y(N,{modelValue:D.value,"onUpdate:modelValue":k[1]||(k[1]=p=>D.value=p),title:"",width:"31vw",center:""},{default:M(()=>[s("div",zt,[y(ys,{"look-study-id":q.value},null,8,["look-study-id"])])]),_:1},8,["modelValue"]),y(N,{modelValue:O.value,"onUpdate:modelValue":k[2]||(k[2]=p=>O.value=p),title:"",width:"30vw",center:""},{default:M(()=>[s("div",Bt,[y(At,{"look-study-id":W.value,"look-month-id":X.value},null,8,["look-study-id","look-month-id"])])]),_:1},8,["modelValue"])])}}},so=v(Yt,[["__scopeId","data-v-6838263e"]]);export{so as default};
