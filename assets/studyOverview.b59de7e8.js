import{r as V,u as W}from"./school.49559a87.js";import{r as G,c as ee,d as se}from"./study.bdce7221.js";import{h as u}from"./moment.9709ab41.js";import{_ as y,e as d,f as l,g as s,t as c,F as R,v as D,j as X,z as A,x as P,y as g,G as M,d as S,C as v,h,A as T,B as O,H as oe,E as te,w as F,r as C,b as ne}from"./index.4de482d6.js";const ie={name:"RedTagCode",props:{title:{type:String,default:"\u5B9E\u8DF5\u8981\u70B9"},list:{type:[Array,Object],default:()=>[]}},data(){return{}}},ae={style:{display:"flex"},class:"flex-wrap"},re={class:"point-char"},de={class:"tag-code"};function le(e,o,t,_,i,n){return d(),l("div",null,[s("div",ae,[s("span",re,c(t.title),1),(d(!0),l(R,null,D(t.list,(a,r)=>(d(),l("div",{key:r,class:"red-tag"},[X(c(a.name)+" ",1),s("div",de,c(a.class),1)]))),128))])])}const J=y(ie,[["render",le]]),ce="/images/home_progress_mask.png",_e="/images/detail_progress_mask.png",me="/icons/play_icon.svg",pe="/icons/suspend_icon.svg",ue="/icons/play_icon_bright.svg",he="/icons/suspend_icon_bright.svg";const Ce={props:{theme:{type:String,default:"dark"},src:{type:String,default:"",required:!0},totalTime:{type:Number,default:0,required:!0},playTimeDefault:{type:Number,default:0}},computed:{handlePlayTime(){const e=this.secondToTime(this.playTime);return`${e.m}:${e.s}`},handleTotalTime(){const e=this.secondToTime(this.totalTime);return`${e.m}:${e.s}`},handlePercent(){return this.percentage(this.playTime,this.totalTime)}},data(){return{timer:null,statePlay:!1,playTime:0,audioContext:void 0}},mounted(){console.log("playTimeDefault :>> ",this.playTimeDefault)},methods:{secondToTime(e,o="true"){const t=parseInt(e);let _=0,i=0,n=0;return o?(_=Math.floor(t/3600)<10?"0"+Math.floor(t/3600):Math.floor(t/3600),i=Math.floor(t/60%60)<10?"0"+Math.floor(t/60%60):Math.floor(t/60%60),n=Math.floor(t%60)<10?"0"+Math.floor(t%60):Math.floor(t%60)):(_=Math.floor(t/3600),i=Math.floor(t/60%60),n=Math.floor(t%60)),{h:_,m:i,s:n}},percentage(e,o){return Math.round(parseInt(e)/parseInt(o)*1e4)/100},handleHoleShow(e){const o=e/4;return e===0?!1:Math.floor(o)===o},player(){console.log("\u51C6\u5907\u6267\u884C\u64AD\u653E",this.audioContext)},suspend(){console.log("\u51C6\u5907\u6267\u884C\u6682\u505C :>>"),this.audioContext&&this.audioContext.pause()},playeInteractiveAnimation(){console.log("\u89E6\u53D1\u4E86\u5F00\u59CB\u64AD\u653E\u4EA4\u4E92\u52A8\u753B :>> "),this.statePlay=!0,this.timer=setInterval(()=>{if(this.playTime===this.totalTime){this.percent=0,this.playTime=0,this.suspend();return}this.playTime+=1,this.percent+=1},1e3)},suspendInteractiveAnimation(){console.log("\u89E6\u53D1\u4E86\u6682\u505C\u64AD\u653E\u4EA4\u4E92\u52A8\u753B :>> "),this.statePlay=!1,clearInterval(this.timer)},initAudio(){this.playTime=this.playTimeDefault,this.audioContext=new AudioContext,this.audioContext.src=this.src,this.audioContext.autoplay=!1,this.audioContext.startTime=this.playTime,this.audioContext.onPlay(()=>{console.log("\u76D1\u542C\u5230\u97F3\u9891\u64AD\u653E\u4E8B\u4EF6 :>> "),this.playeInteractiveAnimation()}),this.audioContext.onError(e=>{console.log("\u76D1\u542C\u97F3\u9891\u64AD\u653E\u5F02\u5E38 :>> ",e)}),this.audioContext.onPause(()=>{console.log("\u76D1\u542C\u5230\u6682\u505C\u4E8B\u4EF6 :>> ",this.playTime),this.$emit("pause",this.playTime),this.suspendInteractiveAnimation()}),this.audioContext.onEnded(()=>{console.log("\u76D1\u542C\u5230\u64AD\u653E\u5B8C\u6BD5\u4E8B\u4EF6 :>> "),this.percent=0,this.playTime=0,this.suspendInteractiveAnimation(),this.$emit("ended")}),this.audioContext.onError(e=>{console.log(e.errMsg),console.log(e.errCode)})}}},Pe={class:"audio-container"},ge={class:"task-article flex"},Se={class:"process-box"},ye=["percent"],Ae={class:"mask-box-style"},Ee={key:0,class:"audio-progress-mask-style",src:ce},Re={key:1,class:"audio-progress-mask-style",src:_e},De={class:"mask-list custom-flex-start"},Ie={class:"audio-btn-box"};function fe(e,o,t,_,i,n){return d(),l("div",Pe,[s("div",ge,[s("div",Se,[s("progress",{percent:n.handlePercent,"stroke-width":"48",activeColor:"#DA4036",backgroundColor:"#CCCCCC"},null,8,ye),s("div",Ae,[t.theme==="dark"?(d(),l("img",Ee)):(d(),l("img",Re)),s("div",De,[(d(),l(R,null,D(20,(a,r)=>s("div",{key:r,class:A(["mask-item",{"min-hole-dark":t.theme==="dark"&&!n.handleHoleShow(r),"max-hole-dark":t.theme==="dark"&&n.handleHoleShow(r),"min-hole-bright":t.theme==="bright"&&!n.handleHoleShow(r),"max-hole-bright":t.theme==="bright"&&n.handleHoleShow(r)}])},null,2)),64))])])]),s("div",Ie,[P(s("img",{class:"play-icon",src:me,onClick:o[0]||(o[0]=M((...a)=>n.player&&n.player(...a),["stop"]))},null,512),[[g,!i.statePlay&&t.theme==="dark"]]),P(s("img",{class:"play-icon",src:pe,onClick:o[1]||(o[1]=M((...a)=>n.suspend&&n.suspend(...a),["stop"]))},null,512),[[g,i.statePlay&&t.theme==="dark"]]),P(s("img",{class:"play-icon",src:ue,onClick:o[2]||(o[2]=M((...a)=>n.player&&n.player(...a),["stop"]))},null,512),[[g,!i.statePlay&&t.theme==="bright"]]),P(s("img",{class:"play-icon",src:he,onClick:o[3]||(o[3]=M((...a)=>n.suspend&&n.suspend(...a),["stop"]))},null,512),[[g,i.statePlay&&t.theme==="bright"]])])]),s("div",{class:A(["time-box-dark flex",{"time-box-dark":t.theme==="dark","time-box-bright":t.theme==="bright"}])},[s("div",null,c(n.handlePlayTime),1),s("div",null,c(n.handleTotalTime),1)],2)])}const ve=y(Ce,[["render",fe],["__scopeId","data-v-db9fe2c5"]]),Y="/assets/week_theme_tag.f561fa7d.svg",Te="/icons/quotes_start_icon.svg",Oe="/icons/quotes_end_icon.svg";const be={components:{RedTagCode:J,AudioModMod:ve},computed:{handleTagVisible(){return this.taskDay&&this.taskDay.common_tag&&this.taskDay.common_tag.length>0},handleGradeFormat(){return this.taskDay.grade?this.taskDay.grade+"\u5E74\u7EA7":"\u672A\u77E5\u5E74\u7EA7"}},data(){return{isCollection:!1,taskId:null,studentId:null,taskDay:{},playTime:0,evaluationPage:{page:1,limit:10},evaluationTotal:0,last_page:0,evaluationList:[],rateInfo:{},allowsEvaluationOf:!1}},props:["lookStudyId"],watch:{lookStudyId:{handler(e){console.log("study_id",e),this.studyDailyGetAPI(e)},immediate:!0}},methods:{onShare(e){console.log("e :>> ",e)},onClickCollection(){this.isCollection=!this.isCollection,this.rateInfoAddAPI(this.taskId,this.studentId,this.rateInfo.share,this.isCollection)},onComments(){this.allowsEvaluationOf&&this.$refs.publishComments.open()},onPause(e){console.log("TaskDay\u6682\u505C :>> ",e),this.studyPlaySetAPI(this.taskId,e.detail.__args__[0])},onEnded(){console.log("TaskDay\u64AD\u653E\u5B8C\u6BD5 :>> ")},onSubmitComments(e){console.log("\u63D0\u4EA4\u8BC4\u8BBA :>> ",e),this.rateThreadAddAPI(this.taskId,this.studentId,e)},async studyDailyGetAPI(e){const t=await G({study_id:e,type:"daily"});this.taskDay=t}}},j=e=>(T("data-v-0084d0b8"),e=e(),O(),e),we={class:"everyday-detail-container"},ke={class:"task-info-title"},Me={class:"mark-box-style flex"},Fe={key:0,class:"task-type-img-style",src:Y,mode:""},Ue={key:1,class:"tag-name-style"},Le={class:"grade-style"},Ne={class:"title-box-style"},xe={class:"title-style"},We={class:"tag-box-style"},Ve={class:"remarks-box-style"},Ge=j(()=>s("div",null,[s("img",{src:Te,class:"quote-style",alt:"\u5F15\u53F7"})],-1)),je={class:"remarks-style"},He=j(()=>s("div",{class:"remarks-quotes-end-box-style"},[s("img",{src:Oe,class:"quote-style",alt:"\u5F15\u53F7"})],-1)),$e={class:"audio-style-box"},Ke=j(()=>s("div",{class:"audio-title-style"},"\u8BED\u97F3\u64AD\u62A5",-1)),Be=["innerHTML"];function Xe(e,o,t,_,i,n){const a=S("RedTagCode"),r=S("AudioModMod");return d(),l("div",we,[s("div",ke,[s("div",Me,[s("div",{class:A(["flex-start",{"task-type-style":n.handleTagVisible}])},[n.handleTagVisible?(d(),l("img",Fe)):v("",!0),n.handleTagVisible?(d(),l("div",Ue,c(i.taskDay.common_tag[0].name),1)):v("",!0)],2),s("div",Le,"\u6240\u5C5E\u5E74\u7EA7\xB7"+c(n.handleGradeFormat),1)]),s("div",Ne,[s("div",xe,c(i.taskDay.title),1),s("div",We,[h(a,{title:"\u5173\u6CE8\u8981\u70B9",list:i.taskDay.special_tag},null,8,["list"])])]),s("div",Ve,[Ge,s("div",je,c(i.taskDay.slogan),1),He]),s("div",$e,[Ke,s("div",null,[h(r,{theme:"bright",src:i.taskDay.attach_url,ref:"audio",totalTime:i.taskDay.attach_duration,playTimeDefault:i.playTime,onPause:n.onPause,onEnded:n.onEnded},null,8,["src","totalTime","playTimeDefault","onPause","onEnded"])])]),s("div",{class:"content-box-style",innerHTML:i.taskDay.content},null,8,Be)])])}const Je=y(be,[["render",Xe],["__scopeId","data-v-0084d0b8"]]);const Ye={components:{RedTagCode:J},data(){return{weekTaskObj:{area_id:0,attach_type:"none",attach_url:"",can_push:1,change_date:"2022-07-05T09:34:44Z",common_tag:[{class:"G01Test",id:1,name:"\u5BB6\u5EAD\u5171\u5B66",study_id:1,study_type:"daily",tag_type:"common"},{class:"G01Test",id:2,name:"\u5165\u5B66\u9002\u5E94",study_id:1,study_type:"daily",tag_type:"special"},{class:"G01Test",id:3,name:"\u4E60\u60EF\u57F9\u517B",study_id:1,study_type:"daily",tag_type:"common"},{class:"G01Test",id:1,name:"\u5BB6\u5EAD\u5171\u5B66",study_id:1,study_type:"daily",tag_type:"common"},{class:"G01Test",id:2,name:"\u5165\u5B66\u9002\u5E94",study_id:1,study_type:"daily",tag_type:"special"},{class:"G01Test",id:3,name:"\u4E60\u60EF\u57F9\u517B",study_id:1,study_type:"daily",tag_type:"common"}],complete:1,content:"\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9",date:"2022-07-04T14:36:01Z",grade:"1",howto:"\u600E\u4E48\u5B9E\u73B0\u5BCC\u6587\u672C\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9",id:1,img:"\u56FE\u7247",img_intro:"\u5C0F\u6807\u56FE\u7247",is_complete:!0,notify:"\u5B9E\u8DF5\u63D0\u793A\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9\u5185\u5BB9",push_date:"2022-03-08T18:09:02Z",school_id:0,school_info:{area_id:1,detail:"\u5750\u843D\u4E8E",icon:"",id:1,img:"",name:"\u798F\u5DDE\u6D4B\u8BD5\u5B66\u6821",sight:255},show_date:"2022-07-04T14:36:01Z",slogan:"\u63A8\u8350\u91D1\u53E5",special_tag:[{class:"G01Test",id:1,name:"\u5BB6\u5EAD\u5171\u5B66",study_id:1,study_type:"daily",tag_type:"common"},{class:"G01Test",id:2,name:"\u5165\u5B66\u9002\u5E94",study_id:1,study_type:"daily",tag_type:"special"},{class:"G01Test",id:3,name:"\u4E60\u60EF\u57F9\u517B",study_id:1,study_type:"daily",tag_type:"common"},{class:"G01Test",id:1,name:"\u5BB6\u5EAD\u5171\u5B66",study_id:1,study_type:"daily",tag_type:"common"},{class:"G01Test",id:2,name:"\u5165\u5B66\u9002\u5E94",study_id:1,study_type:"daily",tag_type:"special"},{class:"G01Test",id:3,name:"\u4E60\u60EF\u57F9\u517B",study_id:1,study_type:"daily",tag_type:"common"}],teacher_id:0,tick_area:1e3,tick_location:"\u67D0\u5730\u70B9",tick_mode:"weekly",tick_need:1,tick_word:"\u6BCF\u5468\u53C2\u4E0E\u6253\u5361",tick_x:0,tick_y:0,title:"\u6807\u9898"},completeCount:0,study_id:0,recordList:[],student_id:33,limit:10,page:1}},props:["lookStudyId"],created(){},watch:{lookStudyId:{handler(e){console.log("study_id",e),this.reqWeekTaskGetApi(e)},immediate:!0}},methods:{async reqWeekTaskGetApi(e){const t=await G({type:"weekly",study_id:e});this.weekTaskObj=t},handleSemester(e){const o=u(e).year();return u(e).isAfter(`${o}-02-01`)&&u(e).isBefore(`${o}-09-01`)?"\u7B2C\u4E8C\u5B66\u671F":"\u7B2C\u4E00\u5B66\u671F"},handleWeek(e){const o=u(e).year();let t="";return u(e).isAfter(`${o}-07-01`)&&u(e).isBefore(`${o}-09-01`)?"\u6691\u5047":(u(e).isAfter(`${o}-02-01`)&&u(e).isBefore(`${o}-09-01`)&&(t=u.duration(u(e)-u(`${o}-02-01`)).asWeeks()),u(e).isBefore(`${o}-02-01`)&&(t=u.duration(u(e)-u(`${o-1}-09-01`)).asWeeks()),u(e).isAfter(`${o}-09-01`)&&(t=u.duration(u(e)-u(`${o}-08-29`)).asWeeks()),console.log(parseInt(t+1)),"\u7B2C"+parseInt(t+1)+"\u5468")}}},qe={class:"root"},Qe={class:"container pad-df"},ze={class:"theme-title-card"},Ze={class:"flex"},es={key:0,class:"theme-tag"},ss=s("img",{src:Y,style:{width:"14px",height:"14px"},alt:"\u56FE\u6807"},null,-1),os={class:"theme-tag-char"},ts={key:1},ns={class:"grade-char"},is={class:"title-theme"},as=["innerHTML"],rs={class:"week-char"},ds={class:"content-wrap"},ls=s("div",{class:"content-title"},[s("div",{class:"block-red"}),s("span",{class:"content-title-char"},"\u5B9E\u8DF5\u65B9\u6CD5")],-1),cs=["innerHTML"],_s={class:"special-box"},ms=s("div",{class:"special-title"},"\u7279\u522B\u63D0\u9192\uFF1A",-1),ps=["innerHTML"];function us(e,o,t,_,i,n){const a=S("RedTagCode");return d(),l("div",qe,[s("div",Qe,[s("div",ze,[s("div",Ze,[i.weekTaskObj.common_tag[0].name?(d(),l("div",es,[ss,s("span",os,c(i.weekTaskObj.common_tag[0].name),1)])):(d(),l("span",ts)),s("span",ns,"\u6240\u5C5E\u5E74\u7EA7\xB7"+c(i.weekTaskObj.grade?i.weekTaskObj.grade+"\u5E74\u7EA7":"\u4E0D\u9650"),1)]),s("div",is,c(i.weekTaskObj.title),1),h(a,{title:"\u5B9E\u8DF5\u8981\u70B9",list:i.weekTaskObj.special_tag},null,8,["list"]),s("div",{innerHTML:i.weekTaskObj.content},null,8,as),s("div",rs,c(n.handleSemester(i.weekTaskObj.show_date))+"-"+c(n.handleWeek(i.weekTaskObj.show_date)),1)]),s("div",ds,[ls,s("div",{innerHTML:i.weekTaskObj.howto},null,8,cs),s("div",_s,[ms,s("div",{innerHTML:i.weekTaskObj.notify},null,8,ps)])])])])}const hs=y(Ye,[["render",us]]);const Cs={props:{width:{type:Number,default:300},height:{type:Number,default:200},chapterId:{type:String,default:""},src:{type:String,defualt:""},initialTime:{type:[Number,String],default:0}},data(){return{videoUrl:"",playTime:0,videoContext:void 0,playStatus:!1}},watch:{chapterId(){this.switchVideoSource()}},mounted(){this.switchVideoSource()},methods:{onPause(){this.pause(),this.playStatus=!1},onPlay(){this.playStatus=!0},onClickNotes(){this.$emit("notes")},videoErrorCallback(e){console.log("\u64AD\u653E\u5F02\u5E38 :>> ",e)},switchVideoSource(){this.videoUrl="#",console.log("this.src :>> ",this.src),setTimeout(()=>{this.videoUrl=this.src},10)},listenPlay(){this.playStatus=!0},timeupdate(e){console.log("event.detail :>> ",e)},pause(){console.log("pause :>> "),this.playStatus&&this.$emit("pause",this.playTime),this.playStatus=!1},ended(){this.playStatus=!1}}},Ps={class:"video-container"},gs=["src","initial-time"];function Ss(e,o,t,_,i,n){return d(),l("div",Ps,[s("video",{id:"myVideo",style:{width:"100%",height:"100%"},src:i.videoUrl,"initial-time":t.initialTime,"object-fit":"contain",onPlay:o[0]||(o[0]=(...a)=>n.listenPlay&&n.listenPlay(...a)),onTimeupdate:o[1]||(o[1]=(...a)=>n.timeupdate&&n.timeupdate(...a)),onPause:o[2]||(o[2]=(...a)=>n.pause&&n.pause(...a)),onEnded:o[3]||(o[3]=(...a)=>n.ended&&n.ended(...a)),onError:o[4]||(o[4]=(...a)=>n.videoErrorCallback&&n.videoErrorCallback(...a)),controls:""},null,40,gs)])}const ys=y(Cs,[["render",Ss],["__scopeId","data-v-42f7733b"]]);const As={props:{list:{type:[Array,Object],default:()=>[]},active:{type:[String,Number],default:1}},created(){console.log("this.list :>> ",this.list)},methods:{onTab(e){this.$emit("change",e.value)}}},Es=e=>(T("data-v-4629af22"),e=e(),O(),e),Rs={class:"tabs-container"},Ds={class:"tabs-header-box"},Is={class:"tabs-header-ul-style flex align-start"},fs=["onClick"],vs=Es(()=>s("div",{class:"active-border-style"},null,-1));function Ts(e,o,t,_,i,n){return d(),l("div",Rs,[s("div",Ds,[s("div",Is,[(d(!0),l(R,null,D(t.list,a=>(d(),l("div",{key:a.value,class:A(["tabs-header-li-style",{"tabs-header-li-active-style":t.active===a.value}]),onClick:r=>n.onTab(a)},[X(c(a.name)+" ",1),vs],10,fs))),128))]),s("div",null,[oe(e.$slots,"default",{},void 0,!0)])])])}const Os=y(As,[["render",Ts],["__scopeId","data-v-4629af22"]]);const bs={name:"IntroductionInfo",props:{studentId:{type:String,default:""},taskId:{type:String,default:""},activeMonth:{type:Object,default:()=>{}}},data(){return{taskMonthData:{},rateInfo:{},isCollection:!1,hashFold:!0}},watch:{taskId:{handler(e){this.studyInfoGetAPI(e,"monthy")},immediate:!0}},mounted(){console.log("taskMonthData :>> ",this.taskMonthData),this.studyInfoGetAPI(this.taskId,"monthy")},methods:{onClickCollection(){this.isCollection=!this.isCollection,this.rateInfoAddAPI(this.taskId,this.studentId,this.rateInfo.share,this.isCollection)},onShare(e){console.log("e :>> ",e),this.rateInfoAddAPI(this.taskId,this.studentId,!0,this.rateInfo.like)},onUnfold(){this.hashFold=!this.hashFold},async studyInfoGetAPI(e,o){const _=await G({study_id:e,type:o});console.log("\u6708\u5217\u8868API_res :>> ",_),this.taskMonthData=_}}},ws=e=>(T("data-v-e42f7e2c"),e=e(),O(),e),ks={class:"introduction-info-container"},Ms={class:"introduction-info-header-style flex"},Fs={class:"introduction-info-title-style"},Us=ws(()=>s("div",{class:"introduction-btn-box-style flex-start"},null,-1)),Ls={class:"introduction-info-article-style"},Ns={class:"lecturer-info-box-style flex-start"},xs={class:"lecturer-name-style"},Ws={class:"tags-style"},Vs={class:"more-wrapper"},Gs=["innerHTML"];function js(e,o,t,_,i,n){return d(),l("div",null,[P(s("div",ks,[s("div",Ms,[s("div",Fs,c(i.taskMonthData.title),1),Us]),s("div",Ls,[s("div",Ns,[s("div",xs," \u8BB2\u5E08\uFF1A"+c(i.taskMonthData.teacher_info?i.taskMonthData.teacher_info.name:""),1),s("div",Ws,c(i.taskMonthData.teacher_info?i.taskMonthData.teacher_info.info:""),1)]),s("div",Vs,[s("div",{class:A(["task-introduce-style",{"fold-style":i.hashFold}])},[s("div",{class:"detail-btn-style",onClick:o[0]||(o[0]=(...a)=>n.onUnfold&&n.onUnfold(...a))},c(i.hashFold?"\u5C55\u5F00":"\u6298\u53E0"),1),s("div",{innerHTML:i.taskMonthData.content},null,8,Gs)],2)])])],512),[[g,i.taskMonthData.title]])])}const Hs=y(bs,[["render",js],["__scopeId","data-v-e42f7e2c"]]),$s="/images/now_play.png";const Ks={components:{},props:{active:{type:[String,Number],default:null},taskId:{type:String,default:""}},data(){return{topicList:[]}},watch:{taskId:{handler(e){console.log("month_id directiory",e),this.studyTopicListAPI(e)},immediate:!0}},mounted(){},methods:{onChange(e,o){this.$emit("change",{row:e,index:o})},secondToTime(e,o="true"){const t=parseInt(e);let _=0,i=0,n=0;return o?(_=Math.floor(t/3600)<10?"0"+Math.floor(t/3600):Math.floor(t/3600),i=Math.floor(t/60%60)<10?"0"+Math.floor(t/60%60):Math.floor(t/60%60),n=Math.floor(t%60)<10?"0"+Math.floor(t%60):Math.floor(t%60)):(_=Math.floor(t/3600),i=Math.floor(t/60%60),n=Math.floor(t%60)),{h:_,m:i,s:n}},handlePlayTime(e){console.log("playTime :>> ",e);const o=this.secondToTime(e,!1);return console.log("time :>> ",o),o.m>0?`${o.m}\u5206\u949F`:`${o.s}\u79D2\u949F`},next(){console.log("\u6267\u884Cnext :>> ");let e=parseInt(this.active);e<this.topicList.length-1&&(e+=1,this.onChange(this.topicList[e],e))},async studyTopicListAPI(e){const t=await ee({monthy_id:e,type:"monthy"});this.topicList=t,this.onChange(this.topicList[0],0)}}},Bs=e=>(T("data-v-ca0763d8"),e=e(),O(),e),Xs={class:"directory-container"},Js={class:"header-box-style border-bottom-style flex"},Ys=Bs(()=>s("div",{class:"header-title-style"},"\u76EE\u5F55",-1)),qs={class:"header-total-style"},Qs={class:"ul-style"},zs=["onClick"],Zs={class:"flex"},eo={class:"li-content-length-style"},so={class:"now-play-image-style",src:$s,mode:""};function oo(e,o,t,_,i,n){return d(),l("div",Xs,[s("div",null,[s("div",Js,[Ys,s("div",qs,"\u5171"+c(i.topicList.length)+"\u8282",1)]),s("div",Qs,[(d(!0),l(R,null,D(i.topicList,(a,r)=>(d(),l("div",{key:r,class:A(["li-style",{"border-bottom-style":r!=5-1}])},[s("div",{class:A(["li-content-style",{"li-content-last-style":r===5-1}]),onClick:I=>n.onChange(a,r)},[s("div",{class:A(["li-content-title-style",{"li-content-title-active-style":t.active===r}])},c(r+1)+". "+c(a.title),3),s("div",Zs,[s("div",eo,c(n.handlePlayTime(a.attach_duration)),1),P(s("img",so,null,512),[[g,t.active===r]])])],10,zs)],2))),128))])])])}const to=y(Ks,[["render",oo],["__scopeId","data-v-ca0763d8"]]),no=async e=>await V.post("https://api.ps.familyeducation.org.cn/v1/quiz/question/list",e),io=async e=>await V.post("https://api.ps.familyeducation.org.cn/v1/quiz/question/add",e),ao=async e=>await V.post("https://api.ps.familyeducation.org.cn/v1/quiz/question/get",e);const ro={components:{},props:{taskId:{type:Number,default:0}},data(){return{list:[],answerActive:[],result:void 0}},computed:{correctAnswerCmp(){let e="";if(this.result)for(const o of this.result.answerArr)console.log("item :>> ",o),e+=o.title.substring(0,1)+" ";return console.log("str :>> ",e),e},showTipsSuccess(){return this.result?this.result.answerResults==="success":!1},showTipsError(){return this.result?this.result.answerResults==="error":!1},answerState(){return this.result?this.result.answerResults==="error"||this.result.answerResults==="success":!1}},watch:{taskId:{handler(e){this.getListWorkflow()},immediate:!0}},methods:{async getListWorkflow(){this.list=await this.quizQuestionListAPI(this.taskId)},handleAnswerEcho(e){const o=[];e.choices.forEach(t=>{o.push(parseInt(t))}),this.list.selection_info.forEach(t=>{o.forEach(_=>{t.id===_&&(t.checked=!0)})}),this.handleAnswerActive(),this.onSubmit(!1)},changeChecked(e){console.log("\u4FEE\u6539\u9009\u9879 :>> ",e),!this.answerState&&(e.checked=!e.checked,this.handleAnswerActive())},handleAnswerActive(){console.log("this.list :>> ",this.list),this.answerActive=[];for(const e of this.list.selection_info)e.checked&&this.answerActive.push(e.id);console.log("answerActive :>> ",this.answerActive)},handleTips(e){console.log("answer :>> ",e);const o={},t=[],_=[];let i=null;for(const n of this.list.selection_info)n.is_answer===1&&t.push(n);o.answerArr=t;for(const n of t){const a=e.filter(r=>r===n.id);for(const r of a)_.push(r)}return o.activeArr=_,i=t.length===_.length?"success":"error",o.answerResults=i,o},async onSubmit(e=!0){if(e){await this.quizRecordAddAPI(this.list.id,`[${this.answerActive}]`),te({title:"\u7B54\u9898\u6210\u529F",type:"success",success:()=>{this.$emit("submit",this.list),this.result=this.handleTips(this.answerActive),console.log("this.result :>> ",this.result)}});return}this.$emit("submit",this.list),this.result=this.handleTips(this.answerActive),console.log("this.result :>> ",this.result)},onRedo(){this.answerActive=[],this.result=void 0,this.list.selection_info.forEach(e=>{e.checked=!1})},async quizQuestionListAPI(e){const t=await no({study_id:e});console.log("res :>> ",t);for(const _ of t[0].selection_info)_.checked=!1;return t[0]},async quizRecordAddAPI(e,o){return await io({question_id:e,type:"monthy",choice:o})},async quizRecordGetAPI(e){return await ao({question_id:e,type:"monthy"})}}},lo={class:"practice-container"},co={class:"practice-box"},_o={class:"header-style"},mo={key:0,class:"ul-style"},po=["onClick"],uo={class:"icon-box"},ho={class:"answer-options-style"},Co={class:"footer-style"},Po={class:"tips-box-style"},go={class:"success-tips-style"};function So(e,o,t,_,i,n){const a=S("IconSvg");return d(),l("div",lo,[s("div",null,[s("div",co,[s("div",_o,c(i.list.title),1),i.list.selection_info?(d(),l("div",mo,[(d(!0),l(R,null,D(i.list.selection_info,(r,I)=>(d(),l("div",{key:I,class:"li-style custom-flex-start",onClick:b=>n.changeChecked(r)},[s("div",uo,[P(h(a,{iconName:"not_to_choose_icon",width:32,height:32},null,512),[[g,!r.checked]]),P(h(a,{iconName:"regsiter_selected",width:32,height:32},null,512),[[g,r.checked]])]),s("div",ho,c(r.title),1)],8,po))),128))])):v("",!0),s("div",Co,[s("div",Po,[P(s("div",{class:"error-tips-style"}," \u56DE\u7B54\u9519\u8BEF\uFF0C\u6B63\u786E\u7B54\u6848"+c(n.correctAnswerCmp),513),[[g,n.showTipsError]]),P(s("div",go," nice~\u56DE\u7B54\u6B63\u786E\uFF01 ",512),[[g,n.showTipsSuccess]])]),n.answerState?v("",!0):(d(),l("div",{key:0,class:"submit-btn-style",onClick:o[0]||(o[0]=(...r)=>n.onSubmit&&n.onSubmit(...r))}," \u63D0\u4EA4 ")),n.answerState?(d(),l("div",{key:1,class:"reset-btn-style",onClick:o[1]||(o[1]=(...r)=>n.onRedo&&n.onRedo(...r))}," \u91CD\u505A ")):v("",!0)])])])])}const yo=y(ro,[["render",So],["__scopeId","data-v-4d1f50ba"]]);const Ao={name:"everyMonthDetail",props:["lookStudyId","lookMonthId"],components:{VideoMod:ys,Tabs:Os,IntroductionInfo:Hs,Directory:to,Practice:yo},watch:{lookStudyId:{handler(e){console.log("study_id",e),this.taskId=e},immediate:!0},lookMonthId:{handler(e){console.log("month_id",e),this.monthyId=e},immediate:!0}},data(){return{hashHistoryRouter:!1,tabsList:[{name:"\u7B80\u4ECB",value:0},{name:"\u7EC3\u4E60",value:1}],practiceList:{problem:"1.\u5B69\u5B50\u521A\u4E0A\u4E00\u5E74\u7EA7\uFF0C\u5BB6\u957F\u8981\u6709\u56DB\u4E2A\u5FC5\u5907\u7684\u5FC3\u6001\uFF0C\u4EE5\u4E0B\u6B63\u786E\u7684\u662F\uFF08\u591A\u9009\uFF09",options:[{name:"A. \u6559\u80B2\u8D23\u4EFB\u8981\u8BA4\u6E05",value:"A",checked:!1},{name:"B. \u7231\u4E0E\u5173\u6000\u8981\u7ED9\u591F",value:"B",checked:!1},{name:"C. \u7FA4\u4F53\u73AF\u5883\u8981\u9002\u5E94",value:"C",checked:!1},{name:"D. \u5BB6\u6821\u6C9F\u901A\u8981\u7D27\u5BC6",value:"D",checked:!1}]},videoW:null,videoH:null,student_id:"",taskId:"",monthyId:"",activeMonth:{},showWriteNote:!1,activeTab:0,activePlayIndex:0,actrivePlay:{},initialTime:0}},methods:{writeNoteSuccess(){this.$refs.notes.noteInfoListAPI(this.taskId)},changeTab(e){console.log("\u5207\u6362Tabs\u9879_val :>> ",e),this.activeTab=e},async onChangeDirectory(e){console.log("\u5207\u6362\u76EE\u5F55\u9009\u4E2D\u9879_val :>> ",e),this.$refs.video.onPause(),this.activePlayIndex=e.index,this.actrivePlay=e.row,this.$refs.video.onPlay()},handleWriteNote(){this.showWriteNote=!0},closeWriteNote(){this.showWriteNote=!1}}},Eo={class:"every-month-detail-container"},Ro={class:"video-box-style"},Do={class:"operation-box-style"},Io={class:"introduction-box-style"},fo={class:"directory-style"},vo={class:"practice-box-style"};function To(e,o,t,_,i,n){const a=S("VideoMod"),r=S("IntroductionInfo"),I=S("Directory"),b=S("Practice"),w=S("Tabs");return d(),l("div",Eo,[s("div",Ro,[h(a,{class:"video-style",ref:"video",chapterId:i.actrivePlay.id,src:i.actrivePlay.attach_url,initialTime:i.initialTime,onNotes:n.handleWriteNote,onPause:e.onPause,onEnded:e.onEnded},null,8,["chapterId","src","initialTime","onNotes","onPause","onEnded"])]),s("div",Do,[P(h(w,{list:i.tabsList,active:i.activeTab,onChange:n.changeTab},{default:F(()=>[P(s("div",Io,[h(r,{studentId:i.student_id,taskId:i.taskId,activeMonth:i.activeMonth},null,8,["studentId","taskId","activeMonth"]),s("div",fo,[h(I,{ref:"Directory",active:i.activePlayIndex,taskId:i.monthyId,onChange:n.onChangeDirectory},null,8,["active","taskId","onChange"])])],512),[[g,i.activeTab===0]]),P(s("div",vo,[h(b,{taskId:i.taskId},null,8,["taskId"])],512),[[g,i.activeTab===1]])]),_:1},8,["list","active","onChange"]),[[g,!i.showWriteNote]])])])}const Oo=y(Ao,[["render",To],["__scopeId","data-v-5c921ba7"]]);const q=e=>(T("data-v-e8df83a1"),e=e(),O(),e),bo={class:"study-overview-container"},wo={class:"sort-wrap"},ko={class:"sort-sec"},Mo=q(()=>s("span",{class:"o-char"},"\u5E74\u7EA7\uFF1A",-1)),Fo=["onClick"],Uo={class:"sort-sec"},Lo=q(()=>s("span",{class:"o-char"},"\u5206\u7C7B\uFF1A",-1)),No=["onClick"],xo={class:"learn-box"},Wo=["onClick"],Vo={class:"left-title"},Go={class:"title-char"},jo={class:"yellow-tag"},Ho={class:"time-char"},$o={class:"flex-start",style:{margin:"18px 0 0 18px"}},Ko={class:"flex"},Bo={class:"record-char"},Xo={class:"study-dialog-wrap"},Jo={class:"study-dialog-wrap"},Yo={class:"study-dialog-wrap"},qo={__name:"studyOverview",setup(e){const o=C([]),t=[{id:"daily",name:"\u6BCF\u65E5\u4E00\u5B66"},{id:"weekly",name:"\u6BCF\u5468\u4E00\u505A"},{id:"monthy",name:"\u6BCF\u6708\u4E00\u8BFE"}],_=C("daily"),i=m=>{_.value=m,k()},n=C(1),a=m=>{n.value=m,k()},r=C(0),I=C(1),b=m=>{I.value=m,k()},w=C([]),k=async()=>{const m={type:_.value,is_custom:!1,limit:10,page:I.value,area_id:0,school_id:0,grade:n.value,title:"",start_date:"",end_date:"",tag_ids:""},E=await se(m);w.value=E.data,r.value=E.total};ne(async()=>{const m=W().gradeList;!m||!m.length?(await W().getSchoolGradeList(),o.value=W().gradeList):o.value=m,k()});const Q=m=>u(m).utc().format("YYYY.MM.DD"),H=C(0),U=C(!1),$=C(0),L=C(!1),K=C(0),N=C(!1),B=C(0),z=m=>{m.study_type=="daily"&&(U.value=!0,H.value=m.id),m.study_type=="weekly"&&(L.value=!0,$.value=m.id),m.study_type=="monthy"&&(N.value=!0,K.value=m.id,B.value=m.study_id)};return(m,E)=>{const Z=S("el-pagination"),x=S("el-dialog");return d(),l("div",bo,[s("div",wo,[s("div",ko,[Mo,(d(!0),l(R,null,D(o.value,p=>(d(),l("div",{class:A(["lab-item",n.value==p.id?"active":""]),onClick:f=>a(p.id),key:p.id},c(p.name),11,Fo))),128))]),s("div",Uo,[Lo,(d(),l(R,null,D(t,p=>s("div",{class:A(["lab-item",_.value==p.id?"active":""]),onClick:f=>i(p.id),key:p.id},c(p.name),11,No)),64))])]),s("div",xo,[(d(!0),l(R,null,D(w.value,p=>(d(),l("div",{class:"learn-sec flex",key:p.id,onClick:f=>z(p)},[s("div",Vo,[s("span",Go,"\u300A"+c(p.title)+"\u300B",1),(d(!0),l(R,null,D(p.special_tag,f=>(d(),l("div",{class:"blue-tag",key:f.id},c(f.name),1))),128)),s("div",jo,"\u6240\u5C5E\u5E74\u7EA7\uFF1A"+c(p.grade)+"\u5E74\u7EA7",1)]),s("span",Ho,c(Q(p.show_date)),1)],8,Wo))),128))]),s("div",$o,[s("div",Ko,[s("span",Bo,"\u5171"+c(r.value)+"\u6761\u8BB0\u5F55",1),h(Z,{"page-size":10,"pager-count":5,layout:"prev, pager, next",total:r.value,onCurrentChange:b},null,8,["total"])])]),h(x,{modelValue:U.value,"onUpdate:modelValue":E[0]||(E[0]=p=>U.value=p),title:"",width:"29vw",center:""},{default:F(()=>[s("div",Xo,[h(Je,{"look-study-id":H.value},null,8,["look-study-id"])])]),_:1},8,["modelValue"]),h(x,{modelValue:L.value,"onUpdate:modelValue":E[1]||(E[1]=p=>L.value=p),title:"",width:"31vw",center:""},{default:F(()=>[s("div",Jo,[h(hs,{"look-study-id":$.value},null,8,["look-study-id"])])]),_:1},8,["modelValue"]),h(x,{modelValue:N.value,"onUpdate:modelValue":E[2]||(E[2]=p=>N.value=p),title:"",width:"30vw",center:""},{default:F(()=>[s("div",Yo,[h(Oo,{"look-study-id":K.value,"look-month-id":B.value},null,8,["look-study-id","look-month-id"])])]),_:1},8,["modelValue"])])}}},st=y(qo,[["__scopeId","data-v-e8df83a1"]]);export{st as default};
