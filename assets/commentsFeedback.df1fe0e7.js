import{c as S}from"./datacenter.a6085fcb.js";import{u as C}from"./family.8f3cb343.js";import{h as D}from"./handleView.a2e4f6bb.js";import{u as I}from"./area.70bfe4ed.js";import{u as V}from"./school.668a628c.js";import{h as A}from"./moment.9709ab41.js";import{_ as N,r,b as T,d as z,e as c,f as l,g as e,F as m,v as u,t as o,h as B,z as E,i as M}from"./index.28014d4a.js";const q="/icons/avatar_icon.png";const H={class:"feedback-container"},P={class:"tab-box"},G=["onClick"],$={class:"comments-wrap"},j={class:"comments-box"},J=["src"],K={key:1,class:"avatar",src:q,alt:""},O={class:"comment-right"},Q={class:"name-date-sec"},U={class:"name-sec"},W={class:"name-char"},X={class:"yellow-tag"},Y={class:"yellow-tag"},Z={class:"date-char"},ss={class:"comment-content"},es={class:"img-wrap"},ts=["src"],as={class:"study-box"},os={class:"c-char"},ns={class:"blue-char"},cs={class:"flex-start",style:{margin:"18px 0 18px 18px"}},ls={class:"flex"},is={class:"record-char"},rs={__name:"commentsFeedback",setup(ds){const y=t=>A(t).format("MM.DD HH:mm"),h=[{id:"daily",name:"\u6BCF\u65E5\u4E00\u5B66"},{id:"weekly",name:"\u6BCF\u5468\u4E00\u505A"},{id:"monthy",name:"\u6BCF\u6708\u4E00\u8BFE"}],d=r("daily"),i=r(0),f=r([]),_=async()=>{const t={area_id:I().areaInfo.area_id||0,study_type:d.value,limit:10,page:p.value},a=await S(t);f.value=a.data,i.value=a.total},g=t=>{const a=V().schoolInfoList;let n="";return a.forEach(s=>{s.id==t&&(n=s.name)}),n},b=t=>{const a=[];for(const n in t)n.includes("img")&&t[n]!="null"&&a.push(t[n])};T(()=>{_()});const k=t=>{d.value=t,_()},p=r(1),x=t=>{p.value=t,_()},R=t=>{for(const a of h)if(a.id==t)return a.name},w=t=>{const a=C().familyRoleList;let n="";return a.forEach(s=>{s.id==t&&(n=s.name)}),n};return(t,a)=>{const n=z("el-pagination");return c(),l("div",H,[e("div",P,[(c(),l(m,null,u(h,s=>e("div",{class:E(["tab-item",s.id==d.value?"active":""]),onClick:v=>k(s.id),key:s.id},o(s.name),11,G)),64))]),e("div",$,[e("h3",null,"\u7D2F\u8BA1\u8BC4\u4EF7("+o(i.value)+")",1),e("div",j,[(c(!0),l(m,null,u(f.value,(s,v)=>(c(),l("div",{class:"comments-item",key:v},[s.user_info&&s.user_info.wx_img?(c(),l("img",{key:0,class:"avatar",src:s.user_info.wx_img,alt:""},null,8,J)):(c(),l("img",K)),e("div",O,[e("div",Q,[e("div",U,[e("span",W,o(s.student_info.name)+"\u7684"+o(w(s.family_info.family_role_id)),1),e("div",X,o(g(s.student_info.school_id)),1),e("div",Y,o(M(D)(s.student_info.year).name)+o(s.student_info.class)+"\u73ED ",1)]),e("span",Z,o(y(s.date)),1)]),e("p",ss,o(s.content),1),e("div",es,[(c(!0),l(m,null,u(b(s),(F,L)=>(c(),l("img",{class:"img",key:L,src:F,alt:""},null,8,ts))),128))]),e("div",as,[e("span",os,"\u8BC4\u8BBA"+o(R(s.study_info.study_type))+"\uFF1A",1),e("span",ns,"\u300A"+o(s.study_info.title)+"\u300B",1)])])]))),128))]),e("div",cs,[e("div",ls,[e("span",is,"\u5171"+o(i.value)+"\u6761\u8BB0\u5F55",1),B(n,{"page-size":10,"pager-count":5,layout:"prev, pager, next",total:i.value,onCurrentChange:x},null,8,["total"])])])])])}}},ys=N(rs,[["__scopeId","data-v-877becad"]]);export{ys as default};
