import{_ as y,r as o,b as $,e as l,f as _,g as e,t as a,n as D,x as M,y as S,j as Y,F as k,v as R,z as A,h as w,A as C,B}from"./index.4de482d6.js";import{_ as L}from"./fire_icon.392f0831.js";import{u as b}from"./school.49559a87.js";import"./teacher.345ee92c.js";import{h}from"./moment.9709ab41.js";import{a as V,d as N}from"./datacenter.afea004c.js";import{u as x}from"./area.ea944049.js";const j="/images/school_logo.png";const q={class:"grade-class-rank-container"},z={class:"right-data-wrap"},F={class:"progress-complete"},G={class:"progress-box"},W={class:"flex"},E={class:"gc-char"},P={class:"progress"},O={class:"fire-icon",src:L,alt:"fire"},T={class:"per-char"},H={class:"data-box flex"},J={class:"data-detail-wrap"},K={class:"data-char"},Q=Y("\u7D2F\u8BA1\u6CE8\u518C\uFF1A"),U={class:"blue-char"},X={__name:"GradeRateView",props:{registerYearInfo:{type:Object}},setup(t){o(!0);const d=c=>{const i=b().schoolInfoList;let u="";return i.forEach(p=>{p.id==c&&(u=p.name)}),u},r=(c=0,i=0)=>i?Math.ceil(c/i*100):100;return o([]),$(()=>{}),(c,i)=>(l(),_("div",q,[e("div",z,[e("div",F,[e("div",G,[e("div",W,[e("span",E,a(d(t.registerYearInfo.school_id)),1),e("div",P,[e("div",{style:D(`width: ${r(t.registerYearInfo.parent_count,t.registerYearInfo.student_should_count)>=100?100:r(t.registerYearInfo.parent_count,t.registerYearInfo.student_should_count)}%`),class:"progress-active"},null,4),M(e("img",O,null,512),[[S,r(t.registerYearInfo.parent_count,t.registerYearInfo.student_should_count)>=100]])]),e("span",T,a(r(t.registerYearInfo.parent_count,t.registerYearInfo.student_should_count))+"%",1)])])]),e("div",H,[e("div",J,[e("span",K,[Q,e("span",U,a(t.registerYearInfo.parent_count),1),Y("/"+a(t.registerYearInfo.student_should_count)+"\u4EBA",1)])])])])]))}},Z=y(X,[["__scopeId","data-v-e00fc8c7"]]);const ee={class:"date-box"},se={class:"date-list-wrap"},te=["onClick"],ae={class:"day-char"},oe={class:"week-char"},ce={class:"update-char"},ne=Y(" \u6570\u636E\u66F4\u65B0\u4E8E\uFF1A"),re={class:"date-char"},ie={__name:"DateListBox",setup(t){const d=o(""),r=o(""),c=o([]),i=()=>{for(let s=0;s<=5;s++){const n={day:h().subtract(s,"day").format("D"),week:h().subtract(s,"day").format("ddd")};c.value.push(n)}for(let s=0;s<=3;s++){const n={day:h().add(s,"day").format("D"),week:h().add(s,"day").format("ddd")};c.value.push(n)}},u=o(""),p=()=>{const s=h().isoWeekday(),n=["","\u661F\u671F\u4E00","\u661F\u671F\u4E8C","\u661F\u671F\u4E09","\u661F\u671F\u56DB","\u661F\u671F\u4E94","\u661F\u671F\u516D","\u661F\u671F\u65E5"];u.value=n[s]};$(()=>{d.value=h().format("YYYY\u5E74MM\u6708DD\u65E5"),r.value=h().format("MMMM"),i(),p()});const f=o(6),v=s=>{f.value=s};return(s,n)=>(l(),_("div",ee,[e("h4",null,a(r.value),1),e("ul",se,[(l(!0),_(k,null,R(c.value,(m,I)=>(l(),_("li",{class:A(["date-item",I==f.value?"active":""]),onClick:be=>v(I),key:I},[e("span",ae,a(m.day),1),e("span",oe,a(m.week),1)],10,te))),128))]),e("div",ce,[ne,e("span",re,a(d.value)+" "+a(u.value),1)])]))}},le=y(ie,[["__scopeId","data-v-4102263a"]]);const g=t=>(C("data-v-fabf5fac"),t=t(),B(),t),_e={class:"complete-rate-container"},de={class:"all-complete-box flex"},ue={class:"left-box"},he={class:"num"},fe=g(()=>e("span",{class:"per-char"},"%",-1)),pe=g(()=>e("span",{class:"per-char"},"\u5168\u533A\u7D2F\u8BA1\u5B8C\u6210\u6CE8\u518C\u7387",-1)),ve={class:"school-logo-box"},me=["src"],ge={key:1,class:"logo-img",src:j,alt:""},Ie={class:"school-char"},ye={class:"student-num"},$e={class:"num-box"},Ye={class:"num-char"},we=g(()=>e("span",{class:"c-char"},"\u7D2F\u8BA1\u6CE8\u518C\u4EBA\u6570",-1)),xe={class:"grade-rage-box"},ke=g(()=>e("h3",null,"\u5404\u5B66\u6821\u6CE8\u518C\u7387",-1)),Re={__name:"CompletionRate",setup(t){const d=o(0),r=o(0),c=o(0),i=async()=>{const v={area_id:x().areaInfo.area_id||0},s=await V(v);if(s){r.value=s.student_should_count,c.value=s.parent_count;const n=s.parent_count||0,m=s.student_should_count||0;m?d.value=Math.ceil(n/m*100):d.value=100}},u=o([]),p=async()=>{const v={area_id:x().areaInfo.area_id||0,start_date:"2012-02-01",end_date:h().format("YYYY-MM-DD")},s=await N(v);s&&s.length&&(u.value=s)},f=o({});return $(async()=>{f.value=b().schoolDomainInfo,i(),p()}),(v,s)=>(l(),_("div",_e,[e("div",null,[e("div",de,[e("div",ue,[e("span",he,a(d.value),1),fe,pe]),e("div",ve,[f.value.icon?(l(),_("img",{key:0,class:"logo-img",src:f.value.icon,alt:""},null,8,me)):(l(),_("img",ge)),e("span",Ie,a(f.value.name),1),e("span",ye,"\u5168\u533A\u5B66\u751F\u4EBA\u6570\uFF1A"+a(r.value||0)+"\u4EBA",1),e("div",$e,[e("span",Ye,a(c.value||0),1),we])])]),w(le)]),e("div",xe,[ke,(l(!0),_(k,null,R(u.value,n=>(l(),_("div",{class:"rate-item-wrap",key:n.id},[w(Z,{registerYearInfo:n},null,8,["registerYearInfo"])]))),128))])]))}},Ve=y(Re,[["__scopeId","data-v-fabf5fac"]]);export{Ve as default};
