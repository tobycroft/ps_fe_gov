import{_ as $,c as H,r as _,b as O,e as c,f as i,g as t,t as s,A as M,B as E,q as J,s as Q,d as P,F as b,v as S,h as C,x as r,y as m,z as U,n as Y,C as f,i as N,D as X}from"./index.28014d4a.js";import{a as Z,b as ee}from"./datacenter.a6085fcb.js";import{u as L}from"./area.70bfe4ed.js";import{a as te,b as ae}from"./study.c8782b7e.js";import{u as B}from"./school.668a628c.js";import{h as p}from"./moment.9709ab41.js";import{g as se}from"./ak.7f196e16.js";import{_ as A}from"./fire_icon.392f0831.js";const q=e=>(M("data-v-a4d4090b"),e=e(),E(),e),oe={class:"all-complete-box flex"},le={class:"left-box"},ne={class:"num"},ce=q(()=>t("span",{class:"per-char"},"%",-1)),ie=q(()=>t("span",{class:"per-char"},"\u5168\u533A\u7D2F\u8BA1\u5B8C\u6210\u6CE8\u518C\u7387",-1)),de={__name:"PerAllComplete",setup(e){H();const o=_(0),a=async()=>{const n={area_id:L().areaInfo.area_id||0},l=await Z(n);if(l){const d=l.parent_count||0,u=l.student_should_count||0;u?o.value=Math.ceil(d/u*100):o.value=100}};return O(()=>{a()}),(n,l)=>(c(),i("div",oe,[t("div",le,[t("span",ne,s(o.value),1),ce,ie])]))}},ue=$(de,[["__scopeId","data-v-a4d4090b"]]);function re(){const e=_({}),o=_({}),a=async()=>{const d={school_id:B().getSchoolInfo.id,type:"term"},u=await te(d);e.value=u},n=async()=>{const d={school_id:B().getSchoolInfo.id},u=await ae(d);o.value=u};return a(),n(),{studyDashboardCompleteCountRef:e,studyDashboardCompleteDailyRef:o}}const me=J({name:"CompletedAmountOverview",props:{dataSource:{type:Object,default:()=>({})},dataSourceAvg:{type:Object,default:()=>({})}},setup(e){const o=_({total:{title:"\u603B\u8BBF\u95EE\u91CF",icon:"overview_total_icon_img",num:0,tag:{title:"\u4ECA\u65E5\u65B0\u589E",num:0},averageDaily:{title:"\u65E5\u5747\u8BBF\u95EE\u91CF",num:0}},daily:{title:"\u6BCF\u65E5\u4E00\u5B66\u603B\u5B66\u4E60\u91CF",icon:"overview_daily_icon_img",num:0,tag:{title:"\u4ECA\u65E5\u65B0\u589E",num:0},averageDaily:{title:"\u65E5\u5747\u5B66\u4E60\u91CF",num:0}},weekly:{title:"\u6BCF\u5468\u4E00\u505A\u603B\u5B8C\u6210\u91CF",icon:"overview_weekly_icon_img",num:0,tag:{title:"\u4ECA\u65E5\u65B0\u589E",num:0},averageDaily:{title:"\u65E5\u5747\u5B8C\u6210\u91CF",num:0}},monthy:{title:"\u6BCF\u6708\u4E00\u8BFE\u603B\u5B66\u4E60\u91CF",icon:"overview_monthly_icon_img",num:0,tag:{title:"\u4ECA\u65E5\u65B0\u589E",num:0},averageDaily:{title:"\u65E5\u5747\u5B66\u4E60\u91CF",num:0}}}),a=_(e.dataSource),n=_(e.dataSourceAvg);return Q(()=>{a.value=e.dataSource,n.value=e.dataSourceAvg,Object.keys(a.value).length>0&&(o.value.total.num=a.value.total_all,o.value.total.tag.num=a.value.all_today,o.value.total.averageDaily.num=Math.ceil(n.value.all_num/n.value.day_num),o.value.daily.num=a.value.total_daily,o.value.daily.tag.num=a.value.daily,o.value.daily.averageDaily.num=Math.ceil(n.value.daily/n.value.day_num),o.value.weekly.num=a.value.total_weekly,o.value.weekly.tag.num=a.value.weekly_today,o.value.weekly.averageDaily.num=Math.ceil(n.value.weekly/n.value.day_num),o.value.monthy.num=a.value.total_monthy,o.value.monthy.tag.num=a.value.monthy_today,o.value.monthy.averageDaily.num=Math.ceil(n.value.monthy/n.value.day_num))}),{overviewListRef:o,getImageUrl:se}}});const _e={class:"completed-amount-overview-container"},ve={class:"completed-amount-overview-ul flex"},he={class:"el-card-style","body-style":{padding:"0px"}},ye={class:"flex"},pe={class:"title-style"},ge={class:"flex-start align-end"},fe={class:"total-num-style"},ke={class:"tag-box flex-center"},Ie={class:"flex-start"},we={class:"average-daily-title-style"},Ce={class:"average-daily-num-style"};function $e(e,o,a,n,l,d){const u=P("el-image");return c(),i("div",_e,[t("ul",ve,[(c(!0),i(b,null,S(e.overviewListRef,(v,w)=>(c(),i("li",{key:w,class:"completed-amount-overview-li"},[t("div",he,[t("header",ye,[t("p",pe,s(v.title),1),C(u,{class:"header-icon-style",src:e.getImageUrl(v.icon+".png")},null,8,["src"])]),t("article",ge,[t("p",fe,s(v.num),1),t("div",ke,[t("p",null,s(v.tag.title),1),t("p",null,s(v.tag.num),1)])]),t("footer",Ie,[t("p",we,s(v.averageDaily.title),1),t("p",Ce,s(v.averageDaily.num),1)])])]))),128))])])}const De=$(me,[["render",$e],["__scopeId","data-v-7331e030"]]),xe="/images/rank1.png",Ye="/images/rank2.png",be="/images/rank3.png",Se="/images/six_border.png";const I=e=>(M("data-v-10fb257e"),e=e(),E(),e),Me={class:"grade-class-rank-container"},Ee={class:"rank-left"},Ae={class:"rank-img",src:xe,alt:""},Be={class:"rank-img",src:Ye,alt:""},Fe={class:"rank-img",src:be,alt:""},Re={class:"rank-cic"},Te=I(()=>t("img",{class:"six-img",src:Se,alt:""},null,-1)),Ve={class:"rank-num"},Ne={class:"right-data-wrap"},Oe={class:"progress-complete"},Pe={class:"progress-box"},Ue={class:"flex"},Le={class:"gc-char"},qe={class:"cp-char"},Ke={key:0,class:"progress"},je={class:"fire-icon",src:A,alt:"fire"},ze={key:1,class:"progress"},We={class:"fire-icon",src:A,alt:"fire"},Ge={class:"progress"},He={class:"fire-icon",src:A,alt:"fire"},Je={class:"progress"},Qe={class:"fire-icon",src:A,alt:"fire"},Xe={key:0,class:"per-char"},Ze={key:1,class:"per-char"},et={key:2,class:"per-char"},tt={key:3,class:"per-char"},at={class:"data-box flex"},st={class:"data-detail-wrap"},ot=I(()=>t("span",{class:"data-char"},"\u6570\u636E\u6982\u89C8",-1)),lt={class:"data-item"},nt=I(()=>t("div",{class:"char"},"\u5B66\u4E60\u4EBA\u6B21",-1)),ct={class:"data-item"},it={class:"num-char"},dt=I(()=>t("div",{class:"char"},"\u73ED\u7EA7\u4EBA\u6570",-1)),ut={class:"data-item"},rt={class:"num-char"},mt={class:"char"},_t={class:"data-item"},vt={class:"num-char"},ht=I(()=>t("div",{class:"char"},"\u6BCF\u65E5\u4E00\u5B66",-1)),yt={class:"data-item"},pt={class:"num-char"},gt=I(()=>t("div",{class:"char"},"\u6BCF\u5468\u4E00\u505A",-1)),ft={class:"data-item"},kt={class:"num-char"},It=I(()=>t("div",{class:"char nomar"},"\u6BCF\u6708\u4E00\u8BFE",-1)),wt={__name:"ClassRankForComplete",props:{completeItem:{type:Object},completeIndex:{type:Number,default:0},rankMode:{type:Number,default:1},studyType:{type:String,default:""}},setup(e){const o=l=>{const d=B().schoolInfoList;let u="";return d.forEach(v=>{v.id==l&&(u=v.name)}),u},a=l=>Math.ceil(Number(l)*100),n=(l,d)=>({isUp:l-d>0,isShow:l-d!=0,numAbs:Math.abs(l-d)});return(l,d)=>(c(),i("div",Me,[t("div",Ee,[r(t("img",Ae,null,512),[[m,e.completeIndex==0]]),r(t("img",Be,null,512),[[m,e.completeIndex==1]]),r(t("img",Fe,null,512),[[m,e.completeIndex==2]]),r(t("div",Re,[Te,t("span",Ve,s(e.completeIndex+1),1)],512),[[m,e.completeIndex>2]]),r(t("div",{class:U(["ranked-tag",n(e.completeItem.rank_index_last,e.completeItem.rank_index).isUp?"":"green"])}," \u8F83\u4E0A"+s(e.rankMode==1?"\u5468":"\u6708")+s(n(e.completeItem.rank_index_last,e.completeItem.rank_index).isUp?"\u4E0A\u5347":"\u4E0B\u964D")+s(n(e.completeItem.rank_index_last,e.completeItem.rank_index).numAbs)+"\u540D ",3),[[m,n(e.completeItem.rank_index_last,e.completeItem.rank_index).isShow]])]),t("div",Ne,[t("div",Oe,[t("div",Pe,[t("div",Ue,[t("span",Le,s(o(e.completeItem.school_id)),1),t("span",qe,"\u672C"+s(e.rankMode==1?"\u5468":"\u6708")+"\u5B66\u4E60\u5B8C\u6210\u7387",1)]),e.studyType=="all"?(c(),i("div",Ke,[t("div",{class:"progress-active",style:Y(`width: ${a(e.completeItem.parent_student_ratio)>=100?100:a(e.completeItem.parent_student_ratio)}%`)},null,4),r(t("img",je,null,512),[[m,a(e.completeItem.parent_student_ratio)>=100]])])):f("",!0),e.studyType=="daily"?(c(),i("div",ze,[t("div",{class:"progress-active",style:Y(`width: ${a(e.completeItem.daily_parent_ratio)>=100?100:a(e.completeItem.daily_parent_ratio)}%`)},null,4),r(t("img",We,null,512),[[m,a(e.completeItem.daily_parent_ratio)>=100]])])):f("",!0),r(t("div",Ge,[t("div",{class:"progress-active",style:Y(`width: ${a(e.completeItem.weekly_parent_ratio)>=100?100:a(e.completeItem.weekly_parent_ratio)}%`)},null,4),r(t("img",He,null,512),[[m,a(e.completeItem.weekly_parent_ratio)>=100]])],512),[[m,e.studyType=="weekly"]]),r(t("div",Je,[t("div",{class:"progress-active",style:Y(`width: ${a(e.completeItem.monthy_parent_ratio)>=100?100:a(e.completeItem.monthy_parent_ratio)}%`)},null,4),r(t("img",Qe,null,512),[[m,a(e.completeItem.monthy_parent_ratio)>=100]])],512),[[m,e.studyType=="monthy"]])]),e.studyType=="all"?(c(),i("span",Xe,s(a(e.completeItem.parent_student_ratio))+"%",1)):f("",!0),e.studyType=="daily"?(c(),i("span",Ze,s(a(e.completeItem.daily_parent_ratio))+"%",1)):f("",!0),e.studyType=="weekly"?(c(),i("span",et,s(a(e.completeItem.weekly_parent_ratio))+"%",1)):f("",!0),e.studyType=="monthy"?(c(),i("span",tt,s(a(e.completeItem.monthy_parent_ratio))+"%",1)):f("",!0)]),t("div",at,[t("div",st,[ot,t("div",lt,[r(t("div",{class:"num-char"},s(e.completeItem.complete_parent),513),[[m,e.studyType=="all"]]),r(t("div",{class:"num-char"},s(e.completeItem.daily_parent_num),513),[[m,e.studyType=="daily"]]),r(t("div",{class:"num-char"},s(e.completeItem.weekly_parent_num),513),[[m,e.studyType=="weekly"]]),r(t("div",{class:"num-char"},s(e.completeItem.monthy_parent_num),513),[[m,e.studyType=="monthy"]]),nt]),t("div",ct,[t("div",it,s(e.completeItem.student_num),1),dt]),t("div",ut,[t("div",rt,s(e.completeItem.rank_index_last),1),t("div",mt,s(e.rankMode==1?"\u4E0A\u5468\u6392\u540D":"\u4E0A\u6708\u6392\u540D"),1)]),t("div",_t,[t("div",vt,s(a(e.completeItem.daily_parent_ratio))+"% ",1),ht]),t("div",yt,[t("div",pt,s(a(e.completeItem.weekly_parent_ratio))+"% ",1),gt]),t("div",ft,[t("div",kt,s(a(e.completeItem.monthy_parent_ratio))+"% ",1),It])])])])]))}},Ct=$(wt,[["__scopeId","data-v-10fb257e"]]),$t="/images/nodata_status.png";const Dt={},K=e=>(M("data-v-14029ae3"),e=e(),E(),e),xt={class:"nodata-status-container"},Yt=K(()=>t("img",{class:"nodata-img",src:$t,alt:""},null,-1)),bt=K(()=>t("span",{class:"nodata-char"},"\u6682\u65E0\u6570\u636E\u5185\u5BB9\uFF0C\u770B\u770B\u5176\u4ED6\u7684\u5427~",-1)),St=[Yt,bt];function Mt(e,o){return c(),i("div",xt,St)}const Et=$(Dt,[["render",Mt],["__scopeId","data-v-14029ae3"]]);const j=e=>(M("data-v-0137c6a1"),e=e(),E(),e),At={class:"study-report-container"},Bt={class:"all-wrap"},Ft={class:"sort-wrap"},Rt={class:"title-time"},Tt=j(()=>t("span",{class:"study-tit"},"\u5B66\u4E60\u5B8C\u6210\u699C",-1)),Vt={class:"time-char"},Nt=j(()=>t("span",{class:"o-char"},"\u5206\u7C7B\uFF1A",-1)),Ot=["onClick"],Pt={key:0,class:"date-picker-wrap"},Ut={key:1,class:"date-picker-wrap"},Lt={key:0,class:"data-wrap"},qt={__name:"studyReportForm",setup(e){const{studyDashboardCompleteCountRef:o,studyDashboardCompleteDailyRef:a}=re(),n=[{sortKey:1,sortItem:[{id:"all",name:"\u7EFC\u5408"},{id:"daily",name:"\u6BCF\u65E5\u4E00\u5B66"},{id:"weekly",name:"\u6BCF\u5468\u4E00\u505A"},{id:"monthy",name:"\u6BCF\u6708\u4E00\u8BFE"}]},{sortKey:2,sortItem:[{id:2,name:"\u6708\u699C"},{id:1,name:"\u5468\u699C"}]}],l=_(["school","all",2]),d=_(""),u=_(""),v=_(""),w=_(""),z=(y,g)=>{l.value[y]=g,x()},F=_(""),R=_(""),W=y=>{v.value=p(y).add(1,"day").format("YYYY-MM-DD"),w.value=p(y).add(7,"day").format("YYYY-MM-DD"),x()},G=y=>{d.value=p(y).format("YYYY-MM-01"),u.value=p(d.value).add(1,"month").format("YYYY-MM-DD"),x()},D=_([]),x=async()=>{const y={area_id:L().areaInfo.area_id||0,limit:30,page:1,rank_mode:"school",start_date:l.value[2]==2?d.value:v.value,end_date:l.value[2]==2?u.value:w.value,study_type:l.value[1]},g=await ee(y);D.value=g},T=_("");return O(()=>{T.value=p().format("YYYY\u5E74MM\u6708DD\u65E5"),u.value=p().format("YYYY-MM-01"),d.value=p(u.value).subtract(1,"month").format("YYYY-MM-DD"),w.value=p().isoWeekday(0).format("YYYY-MM-DD"),v.value=p(w.value).subtract(6,"day").format("YYYY-MM-DD"),x()}),(y,g)=>{const V=P("el-date-picker");return c(),i("div",At,[t("div",null,[C(De,{dataSource:N(o),dataSourceAvg:N(a)},null,8,["dataSource","dataSourceAvg"]),t("div",Bt,[C(ue)]),t("div",Ft,[t("div",Rt,[Tt,t("span",Vt,"\u66F4\u65B0\u65F6\u95F4\uFF1A"+s(T.value),1)]),(c(),i(b,null,S(n,h=>t("div",{class:"sort-sec",key:h.sortKey},[Nt,(c(!0),i(b,null,S(h.sortItem,k=>(c(),i("div",{class:U(["lab-item",l.value[h.sortKey]==k.id?"active":""]),onClick:Kt=>z(h.sortKey,k.id),key:k.id},s(k.name),11,Ot))),128))])),64)),l.value[2]==1?(c(),i("div",Pt,[C(V,{modelValue:F.value,"onUpdate:modelValue":g[0]||(g[0]=h=>F.value=h),onChange:W,type:"week",format:"YYYY \u7B2C ww \u5468",placeholder:"\u9009\u62E9\u5468"},null,8,["modelValue"])])):f("",!0),l.value[2]==2?(c(),i("div",Ut,[C(V,{modelValue:R.value,"onUpdate:modelValue":g[1]||(g[1]=h=>R.value=h),type:"month",placeholder:"\u9009\u62E9\u6708",onChange:G},null,8,["modelValue"])])):f("",!0)]),D.value&&D.value.length?(c(),i("div",Lt,[t("div",null,[(c(!0),i(b,null,S(D.value,(h,k)=>(c(),i("div",{class:"mar-wrap",key:k},[C(Ct,{completeItem:h,completeIndex:k,rankMode:l.value[2],studyType:l.value[1]},null,8,["completeItem","completeIndex","rankMode","studyType"])]))),128))])])):(c(),X(Et,{key:1}))])])}}},Zt=$(qt,[["__scopeId","data-v-0137c6a1"]]);export{Zt as default};
